{"title":"Effect on Coach Success","markdown":{"yaml":{"title":"Effect on Coach Success","editor_options":{"chunk_output_type":"inline"},"bibliography":"reference.bib"},"headingText":"All 4th Downs","containsRefs":false,"markdown":"\n\n```{r setup, include = FALSE}\nlibrary(nflverse)\nlibrary(tidyverse)\nlibrary(ggplot2)\nlibrary(grid)\nlibrary(reticulate)\nlibrary(kableExtra)\nlibrary(gridExtra)\nlibrary(plotly)\nlibrary(RColorBrewer)\nlibrary(scales)\noptions(digits = 3)\n\nload(\"clean_data.Rdata\")\n```\n\nAs we saw in the last step of our EDA, coaches are consistently far too conservative when it comes to fourth down decisions. We are trying to figure out why this may be the case. Two possible reasons immediately come to mind:\n\n1.  4th down decisions have less effect on the outcome of games than we think.\n2.  Coaches who are more conservative will keep their jobs longer, as being aggressive (and failing) on fourth down could be generally frowned upon by the NFL community.\n\n\nLets explore the first reason. One simple measure of coach success season by season is winning percentage. To take a quick look this, we can look at how correct decision rate on 4th down compares to the winning percentage a coach had in that particular season. Alongside this process we will also look at the average EPA per play on 4th downs coaches had in go-for-it situations that season. EPA is a measure of success that stands for \"Estimated Points Added\" and it measures the estimated points a play will add to the total final score at the end of the game.\n\n```{r get_seasons, include = FALSE}\nraw_games <- nflreadr::load_schedules()\nhome_games <- raw_games %>%\n  filter(season > 2015 & season < 2023,\n         game_type == \"REG\") %>%\n  dplyr::select(season,\n                result,\n                coach = home_coach) %>%\n  dplyr::mutate(win = if_else(result > 0, 1, 0),\n                loss = if_else(result < 0, 1, 0),\n                tie = if_else(result == 0, 1, 0)) %>%\n  dplyr::group_by(coach,\n                  season) %>%\n  summarize(wins = sum(win),\n            losses = sum(loss),\n            ties = sum(tie))\n\naway_games <- raw_games %>%\n  filter(season > 2015 & season < 2023,\n         game_type == \"REG\") %>%\n  dplyr::select(season,\n                result,\n                coach = away_coach) %>%\n  dplyr::mutate(win = if_else(result < 0, 1, 0),\n                loss = if_else(result > 0, 1, 0),\n                tie = if_else(result == 0, 1, 0)) %>%\n  dplyr::group_by(coach,\n                  season) %>%\n  summarize(wins = sum(win),\n            losses = sum(loss),\n            ties = sum(tie))\n\ncoach_record <- away_games %>%\n  left_join(home_games, by = c(\"coach\", \"season\")) %>%\n  mutate(wins = wins.x + wins.y,\n         losses = losses.x + losses.y,\n         ties = ties.x + ties.y) %>%\n  select(coach, season, wins, losses, ties)\nrm(home_games, away_games, raw_games)\n```\n\n```{r get_coaches, include = FALSE}\ncoaches <- fourth_decisions %>%\n  dplyr::select(coach, team = posteam, season, EPA) %>%\n  left_join(coach_record, by = c(\"coach\", \"season\"))\n\ncoaches <- coaches %>%\n  mutate(pct = (wins + ties * 0.5) / (wins + losses + ties)) %>%\n  select(coach,\n         team,\n         season,\n         pct,\n         epa = EPA)\n```\n\n```{r add_wins, echo = FALSE}\nwin_pct <- coaches %>%\n  left_join(fourth_decisions, by = c(\"coach\", \"team\" = \"posteam\", \"season\")) %>%\n  select(coach,\n         team,\n         season,\n         correct_rate = should_go,\n         pct,\n         epa)\nkable(head(win_pct, 10))\n```\n\nNow we have the winning percentage and epa alongside the correct decision rate on fourth down for every coach by season. Let's take a closer look at this table and add averages for winning percentage, correct decision rate, and epa.\n\n```{r avg_pct, echo = FALSE}\nwin_pct <- win_pct %>%\n  mutate(z_wins = as.numeric(scale(pct)),\n         z_correct = as.numeric(scale(correct_rate)),\n         z_epa = as.numeric(scale(epa)),\n         above_mean_wins = if_else(z_wins > 0, 1, 0),\n         above_mean_correct = if_else(z_correct > 0, 1, 0),\n         above_mean_epa = if_else(z_epa > 0, 1, 0))\n\nkable(head(win_pct, 10))\n```\n\nNow we can cross tabulate effectively.\n\n```{r cross_tab, include = FALSE}\ncross_tab1 <- as.data.frame(table(win_pct$above_mean_wins,\n                                 win_pct$above_mean_correct)) %>%\n  rename(above_mean_wins = Var1,\n         above_mean_correct = Var2)\n\ncross_tab2 <- as.data.frame(table(win_pct$above_mean_epa,\n                                 win_pct$above_mean_correct)) %>%\n  rename(above_mean_epa = Var1,\n         above_mean_correct = Var2)\n```\n\n```{r cross_tab_plot, echo = FALSE}\nggplot(cross_tab1, aes(x = above_mean_correct, y = Freq, fill = factor(above_mean_wins))) +\n  geom_bar(stat = \"identity\", position = \"dodge\") +\n  labs(x = \"Above Mean Correct Decision Rate on 4th Down\", \n       y = \"Frequency\",\n       fill = \"Above Mean 4th Down Wins\") +\n  scale_fill_manual(values = c(\"0\" = \"orange\", \"1\" = \"blue\"), labels = c(\"False\", \"True\")) +\n  theme(legend.position = \"top\")\n```\n\n------------------------------------------------------------------------\n\n```{r cross_tab2_plot, echo = FALSE}\nggplot(cross_tab2, aes(x = above_mean_correct, y = Freq, fill = factor(above_mean_epa))) +\n  geom_bar(stat = \"identity\", position = \"dodge\") +\n  labs(x = \"Above Mean Correct Decision Rate on 4th Down\", \n       y = \"Frequency\",\n       fill = \"Above Mean 4th Down EPA\") +\n  scale_fill_manual(values = c(\"0\" = \"orange\", \"1\" = \"blue\"), labels = c(\"False\", \"True\")) +\n  theme(legend.position = \"top\")\n```\n\nIt looks as if decision rate on 4th down has little effect on the win rate of coaches, which makes sense as when looking at plays across an entire game, 4th down plays make up a small percentage of those plays. It would be worth looking at how influential 4th down plays are on the result of each game compared to other types of plays, though.\n\nHaving a good correct 4th down decision does seem to have more of an effect on EPA, however. This makes sense as EPA in this case is estimated points added on 4th down, meaning this metric is directly measuring success on 4th down ***only***, rather than success across an entire game. It is not surprising that having a good correct 4th down decision rate would lead to a more positive 4th down success metric than a whole game success metric.\n\nIt is an encouraging sign to see that making \"correct\" decisions on 4th down leads to more points on those 4th down plays. This means it would be useful to explore how 4th down plays contribute to a team's final score compared to plays on other downs. This may give us a better idea as to how these 4th down decisions affect the success of coaches across the entire game, rather than simply on 4th down.\n\n# High-Leverage Scenarios\nLet's go back to our discussion involving high-leverage scenarios. What would happen if we did the same cross tabulation as above but only including high-leverage scenarios? In theory, this would give tell us more about a coaches success because these situations are single plays in which games are won and lost. \n\nHere are the first few rows of the dataset showing high-leverage situations we were looking at earlier. This time though it is a larger dataset because I chose to remove the condition that `wp_succeed > 0.95` as that limited us too much. Now the definition for a \"high-leverage scenario\" is one in which the difference in win probability between failing and succeeding in a 4th down attempt is 10%. This way we have 3,676 4th down situations to look at instead of only 113.\n\n```{r filter_levergae, echo = FALSE}\nleverage <- fourth_downs %>% \n  mutate(wp_change = wp_succeed - wp_fail,\n         coach = if_else(posteam_type == \"home\", home_coach, away_coach)) %>%\n  select(season,\n         coach,\n         posteam,\n         defteam,\n         qtr,\n         time,\n         ydstogo,\n         yardline_100,\n         posteam_score,\n         defteam_score,\n         go_boost,\n         go,\n         epa,\n         wp,\n         wp_fail,\n         wp_succeed,\n         wp_change,\n         fg_make_prob,\n         miss_fg_wp,\n         make_fg_wp,\n         punt_wp) %>%\n  filter(abs(wp_change) > .1,\n         qtr == 4)\nkable(head(leverage))\n```\n\nApplying the same transformations to this smaller set as we did to the set of every 4th down play gives us performance by coach in these scenarios.\n\n```{r clean_leverage, echo = FALSE, message = FALSE}\nleverage_decisions <- leverage %>%\n    mutate(should_go = ifelse((go_boost > 0),\n                             (if_else(go == 100, 1, 0)),\n                             NA),\n          shouldnt_go = ifelse((go_boost < 0),\n                             (if_else(go == 0, 1, 0)),\n                             NA)) %>%\n    select(season, coach, posteam, ydstogo, yardline_100, go_boost, should_go, shouldnt_go, go, epa) %>%\n    group_by(coach, posteam, season) %>%\n    summarize(should_go = \n                sum(should_go == 1, na.rm = TRUE) / \n                (sum(should_go == 0 | should_go == 1, na.rm = TRUE)),\n              shouldnt_go = \n                sum(shouldnt_go == 1, na.rm = TRUE) / \n                (sum(shouldnt_go == 0 | shouldnt_go == 1, na.rm = TRUE)),\n              EPA = mean(epa),\n              count = n()) %>%\n  filter(count > 5) %>%\n  ungroup()\n\ncoaches <- fourth_decisions %>%\n  dplyr::select(coach, team = posteam, season, EPA) %>%\n  left_join(coach_record, by = c(\"coach\", \"season\")) %>%\n  mutate(pct = (wins + ties * 0.5) / (wins + losses + ties)) %>%\n  select(coach,\n         team,\n         season,\n         pct,\n         epa = EPA) %>%\n  group_by(coach, team, season) %>%\n  summarise(pct = mean(pct, na.rm = TRUE),\n            epa = mean(epa, na.rm = TRUE)) %>%\n  ungroup()\n\n\nleverage_win_pct <- coaches %>%\n  inner_join(leverage_decisions, by = c(\"coach\", \"team\" = \"posteam\", \"season\")) %>%\n  select(coach,\n         team,\n         season,\n         should_go,\n         shouldnt_go,\n         pct,\n         epa, count)\nkable(head(leverage_win_pct))\n```\n\nNow we can cross tabulate as before. \n```{r leverage_pct, echo = FALSE}\nleverage_win_pct <- leverage_win_pct %>%\n  mutate(z_wins = as.numeric(scale(pct)),\n         z_should = as.numeric(scale(should_go)),\n         z_shouldnt = as.numeric(scale(shouldnt_go)),\n         z_epa = as.numeric(scale(epa)),\n         above_mean_wins = if_else(z_wins > 0, 1, 0),\n         above_mean_should = if_else(z_should > 0, 1, 0),\n         above_mean_shouldnt = if_else(z_shouldnt > 0, 1, 0),\n         above_mean_epa = if_else(z_epa > 0, 1, 0))\n\nkable(head(leverage_win_pct, 10))\n```\n\n```{r leverage_cross_tab, include = FALSE}\ncross_tab1 <- as.data.frame(table(leverage_win_pct$above_mean_wins,\n                                 leverage_win_pct$above_mean_should)) %>%\n  rename(above_mean_wins = Var1,\n         above_mean_should = Var2)\n\ncross_tab2 <- as.data.frame(table(leverage_win_pct$above_mean_epa,\n                                 leverage_win_pct$above_mean_should)) %>%\n  rename(above_mean_epa = Var1,\n         above_mean_should = Var2)\n```\n\n```{r levergae_cross_tab_plot, echo = FALSE}\nggplot(cross_tab1, aes(x = above_mean_should, y = Freq, fill = factor(above_mean_wins))) +\n  geom_bar(stat = \"identity\", position = \"dodge\") +\n  labs(x = \"Above Mean Correct Decision Rate on 4th Down (Go for it scenarios)\", \n       y = \"Frequency\",\n       fill = \"Above Mean Wins\") +\n  scale_fill_manual(values = c(\"0\" = \"orange\", \"1\" = \"blue\"), labels = c(\"False\", \"True\")) +\n  theme(legend.position = \"top\")\n```\n\n```{r leverage_cross_tab2_plot, echo = FALSE}\nggplot(cross_tab2, aes(x = above_mean_should, y = Freq, fill = factor(above_mean_epa))) +\n  geom_bar(stat = \"identity\", position = \"dodge\") +\n  labs(x = \"Above Mean Correct Decision Rate on 4th Down (Go for it scenarios)\", \n       y = \"Frequency\",\n       fill = \"Above Mean 4th Down EPA\") +\n  scale_fill_manual(values = c(\"0\" = \"orange\", \"1\" = \"blue\"), labels = c(\"False\", \"True\")) +\n  theme(legend.position = \"top\")\n```\n\nWe see similar results here, where 4th down correct decision rate does not have much of an effect on a team's record throughout the entire season, but there seems to be even more of an effect on 4th down EPA. This is useful information going into feature selection. We will attempt to predict 4th down EPA during a season, using a variety of features. \n\n```{r save, include = FALSE}\nsave(leverage_win_pct, file = \"leverage_win_pct.Rdata\")\nwrite_csv(leverage_win_pct, \"leverage_win_pct.csv\")\n```\n\n","srcMarkdownNoYaml":"\n\n```{r setup, include = FALSE}\nlibrary(nflverse)\nlibrary(tidyverse)\nlibrary(ggplot2)\nlibrary(grid)\nlibrary(reticulate)\nlibrary(kableExtra)\nlibrary(gridExtra)\nlibrary(plotly)\nlibrary(RColorBrewer)\nlibrary(scales)\noptions(digits = 3)\n\nload(\"clean_data.Rdata\")\n```\n\nAs we saw in the last step of our EDA, coaches are consistently far too conservative when it comes to fourth down decisions. We are trying to figure out why this may be the case. Two possible reasons immediately come to mind:\n\n1.  4th down decisions have less effect on the outcome of games than we think.\n2.  Coaches who are more conservative will keep their jobs longer, as being aggressive (and failing) on fourth down could be generally frowned upon by the NFL community.\n\n# All 4th Downs\n\nLets explore the first reason. One simple measure of coach success season by season is winning percentage. To take a quick look this, we can look at how correct decision rate on 4th down compares to the winning percentage a coach had in that particular season. Alongside this process we will also look at the average EPA per play on 4th downs coaches had in go-for-it situations that season. EPA is a measure of success that stands for \"Estimated Points Added\" and it measures the estimated points a play will add to the total final score at the end of the game.\n\n```{r get_seasons, include = FALSE}\nraw_games <- nflreadr::load_schedules()\nhome_games <- raw_games %>%\n  filter(season > 2015 & season < 2023,\n         game_type == \"REG\") %>%\n  dplyr::select(season,\n                result,\n                coach = home_coach) %>%\n  dplyr::mutate(win = if_else(result > 0, 1, 0),\n                loss = if_else(result < 0, 1, 0),\n                tie = if_else(result == 0, 1, 0)) %>%\n  dplyr::group_by(coach,\n                  season) %>%\n  summarize(wins = sum(win),\n            losses = sum(loss),\n            ties = sum(tie))\n\naway_games <- raw_games %>%\n  filter(season > 2015 & season < 2023,\n         game_type == \"REG\") %>%\n  dplyr::select(season,\n                result,\n                coach = away_coach) %>%\n  dplyr::mutate(win = if_else(result < 0, 1, 0),\n                loss = if_else(result > 0, 1, 0),\n                tie = if_else(result == 0, 1, 0)) %>%\n  dplyr::group_by(coach,\n                  season) %>%\n  summarize(wins = sum(win),\n            losses = sum(loss),\n            ties = sum(tie))\n\ncoach_record <- away_games %>%\n  left_join(home_games, by = c(\"coach\", \"season\")) %>%\n  mutate(wins = wins.x + wins.y,\n         losses = losses.x + losses.y,\n         ties = ties.x + ties.y) %>%\n  select(coach, season, wins, losses, ties)\nrm(home_games, away_games, raw_games)\n```\n\n```{r get_coaches, include = FALSE}\ncoaches <- fourth_decisions %>%\n  dplyr::select(coach, team = posteam, season, EPA) %>%\n  left_join(coach_record, by = c(\"coach\", \"season\"))\n\ncoaches <- coaches %>%\n  mutate(pct = (wins + ties * 0.5) / (wins + losses + ties)) %>%\n  select(coach,\n         team,\n         season,\n         pct,\n         epa = EPA)\n```\n\n```{r add_wins, echo = FALSE}\nwin_pct <- coaches %>%\n  left_join(fourth_decisions, by = c(\"coach\", \"team\" = \"posteam\", \"season\")) %>%\n  select(coach,\n         team,\n         season,\n         correct_rate = should_go,\n         pct,\n         epa)\nkable(head(win_pct, 10))\n```\n\nNow we have the winning percentage and epa alongside the correct decision rate on fourth down for every coach by season. Let's take a closer look at this table and add averages for winning percentage, correct decision rate, and epa.\n\n```{r avg_pct, echo = FALSE}\nwin_pct <- win_pct %>%\n  mutate(z_wins = as.numeric(scale(pct)),\n         z_correct = as.numeric(scale(correct_rate)),\n         z_epa = as.numeric(scale(epa)),\n         above_mean_wins = if_else(z_wins > 0, 1, 0),\n         above_mean_correct = if_else(z_correct > 0, 1, 0),\n         above_mean_epa = if_else(z_epa > 0, 1, 0))\n\nkable(head(win_pct, 10))\n```\n\nNow we can cross tabulate effectively.\n\n```{r cross_tab, include = FALSE}\ncross_tab1 <- as.data.frame(table(win_pct$above_mean_wins,\n                                 win_pct$above_mean_correct)) %>%\n  rename(above_mean_wins = Var1,\n         above_mean_correct = Var2)\n\ncross_tab2 <- as.data.frame(table(win_pct$above_mean_epa,\n                                 win_pct$above_mean_correct)) %>%\n  rename(above_mean_epa = Var1,\n         above_mean_correct = Var2)\n```\n\n```{r cross_tab_plot, echo = FALSE}\nggplot(cross_tab1, aes(x = above_mean_correct, y = Freq, fill = factor(above_mean_wins))) +\n  geom_bar(stat = \"identity\", position = \"dodge\") +\n  labs(x = \"Above Mean Correct Decision Rate on 4th Down\", \n       y = \"Frequency\",\n       fill = \"Above Mean 4th Down Wins\") +\n  scale_fill_manual(values = c(\"0\" = \"orange\", \"1\" = \"blue\"), labels = c(\"False\", \"True\")) +\n  theme(legend.position = \"top\")\n```\n\n------------------------------------------------------------------------\n\n```{r cross_tab2_plot, echo = FALSE}\nggplot(cross_tab2, aes(x = above_mean_correct, y = Freq, fill = factor(above_mean_epa))) +\n  geom_bar(stat = \"identity\", position = \"dodge\") +\n  labs(x = \"Above Mean Correct Decision Rate on 4th Down\", \n       y = \"Frequency\",\n       fill = \"Above Mean 4th Down EPA\") +\n  scale_fill_manual(values = c(\"0\" = \"orange\", \"1\" = \"blue\"), labels = c(\"False\", \"True\")) +\n  theme(legend.position = \"top\")\n```\n\nIt looks as if decision rate on 4th down has little effect on the win rate of coaches, which makes sense as when looking at plays across an entire game, 4th down plays make up a small percentage of those plays. It would be worth looking at how influential 4th down plays are on the result of each game compared to other types of plays, though.\n\nHaving a good correct 4th down decision does seem to have more of an effect on EPA, however. This makes sense as EPA in this case is estimated points added on 4th down, meaning this metric is directly measuring success on 4th down ***only***, rather than success across an entire game. It is not surprising that having a good correct 4th down decision rate would lead to a more positive 4th down success metric than a whole game success metric.\n\nIt is an encouraging sign to see that making \"correct\" decisions on 4th down leads to more points on those 4th down plays. This means it would be useful to explore how 4th down plays contribute to a team's final score compared to plays on other downs. This may give us a better idea as to how these 4th down decisions affect the success of coaches across the entire game, rather than simply on 4th down.\n\n# High-Leverage Scenarios\nLet's go back to our discussion involving high-leverage scenarios. What would happen if we did the same cross tabulation as above but only including high-leverage scenarios? In theory, this would give tell us more about a coaches success because these situations are single plays in which games are won and lost. \n\nHere are the first few rows of the dataset showing high-leverage situations we were looking at earlier. This time though it is a larger dataset because I chose to remove the condition that `wp_succeed > 0.95` as that limited us too much. Now the definition for a \"high-leverage scenario\" is one in which the difference in win probability between failing and succeeding in a 4th down attempt is 10%. This way we have 3,676 4th down situations to look at instead of only 113.\n\n```{r filter_levergae, echo = FALSE}\nleverage <- fourth_downs %>% \n  mutate(wp_change = wp_succeed - wp_fail,\n         coach = if_else(posteam_type == \"home\", home_coach, away_coach)) %>%\n  select(season,\n         coach,\n         posteam,\n         defteam,\n         qtr,\n         time,\n         ydstogo,\n         yardline_100,\n         posteam_score,\n         defteam_score,\n         go_boost,\n         go,\n         epa,\n         wp,\n         wp_fail,\n         wp_succeed,\n         wp_change,\n         fg_make_prob,\n         miss_fg_wp,\n         make_fg_wp,\n         punt_wp) %>%\n  filter(abs(wp_change) > .1,\n         qtr == 4)\nkable(head(leverage))\n```\n\nApplying the same transformations to this smaller set as we did to the set of every 4th down play gives us performance by coach in these scenarios.\n\n```{r clean_leverage, echo = FALSE, message = FALSE}\nleverage_decisions <- leverage %>%\n    mutate(should_go = ifelse((go_boost > 0),\n                             (if_else(go == 100, 1, 0)),\n                             NA),\n          shouldnt_go = ifelse((go_boost < 0),\n                             (if_else(go == 0, 1, 0)),\n                             NA)) %>%\n    select(season, coach, posteam, ydstogo, yardline_100, go_boost, should_go, shouldnt_go, go, epa) %>%\n    group_by(coach, posteam, season) %>%\n    summarize(should_go = \n                sum(should_go == 1, na.rm = TRUE) / \n                (sum(should_go == 0 | should_go == 1, na.rm = TRUE)),\n              shouldnt_go = \n                sum(shouldnt_go == 1, na.rm = TRUE) / \n                (sum(shouldnt_go == 0 | shouldnt_go == 1, na.rm = TRUE)),\n              EPA = mean(epa),\n              count = n()) %>%\n  filter(count > 5) %>%\n  ungroup()\n\ncoaches <- fourth_decisions %>%\n  dplyr::select(coach, team = posteam, season, EPA) %>%\n  left_join(coach_record, by = c(\"coach\", \"season\")) %>%\n  mutate(pct = (wins + ties * 0.5) / (wins + losses + ties)) %>%\n  select(coach,\n         team,\n         season,\n         pct,\n         epa = EPA) %>%\n  group_by(coach, team, season) %>%\n  summarise(pct = mean(pct, na.rm = TRUE),\n            epa = mean(epa, na.rm = TRUE)) %>%\n  ungroup()\n\n\nleverage_win_pct <- coaches %>%\n  inner_join(leverage_decisions, by = c(\"coach\", \"team\" = \"posteam\", \"season\")) %>%\n  select(coach,\n         team,\n         season,\n         should_go,\n         shouldnt_go,\n         pct,\n         epa, count)\nkable(head(leverage_win_pct))\n```\n\nNow we can cross tabulate as before. \n```{r leverage_pct, echo = FALSE}\nleverage_win_pct <- leverage_win_pct %>%\n  mutate(z_wins = as.numeric(scale(pct)),\n         z_should = as.numeric(scale(should_go)),\n         z_shouldnt = as.numeric(scale(shouldnt_go)),\n         z_epa = as.numeric(scale(epa)),\n         above_mean_wins = if_else(z_wins > 0, 1, 0),\n         above_mean_should = if_else(z_should > 0, 1, 0),\n         above_mean_shouldnt = if_else(z_shouldnt > 0, 1, 0),\n         above_mean_epa = if_else(z_epa > 0, 1, 0))\n\nkable(head(leverage_win_pct, 10))\n```\n\n```{r leverage_cross_tab, include = FALSE}\ncross_tab1 <- as.data.frame(table(leverage_win_pct$above_mean_wins,\n                                 leverage_win_pct$above_mean_should)) %>%\n  rename(above_mean_wins = Var1,\n         above_mean_should = Var2)\n\ncross_tab2 <- as.data.frame(table(leverage_win_pct$above_mean_epa,\n                                 leverage_win_pct$above_mean_should)) %>%\n  rename(above_mean_epa = Var1,\n         above_mean_should = Var2)\n```\n\n```{r levergae_cross_tab_plot, echo = FALSE}\nggplot(cross_tab1, aes(x = above_mean_should, y = Freq, fill = factor(above_mean_wins))) +\n  geom_bar(stat = \"identity\", position = \"dodge\") +\n  labs(x = \"Above Mean Correct Decision Rate on 4th Down (Go for it scenarios)\", \n       y = \"Frequency\",\n       fill = \"Above Mean Wins\") +\n  scale_fill_manual(values = c(\"0\" = \"orange\", \"1\" = \"blue\"), labels = c(\"False\", \"True\")) +\n  theme(legend.position = \"top\")\n```\n\n```{r leverage_cross_tab2_plot, echo = FALSE}\nggplot(cross_tab2, aes(x = above_mean_should, y = Freq, fill = factor(above_mean_epa))) +\n  geom_bar(stat = \"identity\", position = \"dodge\") +\n  labs(x = \"Above Mean Correct Decision Rate on 4th Down (Go for it scenarios)\", \n       y = \"Frequency\",\n       fill = \"Above Mean 4th Down EPA\") +\n  scale_fill_manual(values = c(\"0\" = \"orange\", \"1\" = \"blue\"), labels = c(\"False\", \"True\")) +\n  theme(legend.position = \"top\")\n```\n\nWe see similar results here, where 4th down correct decision rate does not have much of an effect on a team's record throughout the entire season, but there seems to be even more of an effect on 4th down EPA. This is useful information going into feature selection. We will attempt to predict 4th down EPA during a season, using a variety of features. \n\n```{r save, include = FALSE}\nsave(leverage_win_pct, file = \"leverage_win_pct.Rdata\")\nwrite_csv(leverage_win_pct, \"leverage_win_pct.csv\")\n```\n\n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"knitr"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true,"format-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["styles.css"],"toc":true,"output-file":"effect_on_coach_success.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.3.450","editor":"visual","theme":"sandstone","fontsize":"1em","title":"Effect on Coach Success","editor_options":{"chunk_output_type":"inline"},"bibliography":["reference.bib"]},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}