[
  {
    "objectID": "decision_trees.html",
    "href": "decision_trees.html",
    "title": "Decision Trees",
    "section": "",
    "text": "Classification\n\n\nRegression"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "About",
    "section": "",
    "text": "Thomas Sigall is a graduate student at Georgetown University currently pursuing a Masters of Science in Data Science and Analytics. He graduated from Villanova University in 2023 with a B.A. in Philosophy and Minors in Computer Science and Statistics. Originally from Redmond, Washington, he enjoys studying a wide range of topics, as evidenced by his diverse academic background. Outside of academics, he enjoys running and loves to follow sports."
  },
  {
    "objectID": "code.html",
    "href": "code.html",
    "title": "Code",
    "section": "",
    "text": "Link to GitHub repository"
  },
  {
    "objectID": "data.html",
    "href": "data.html",
    "title": "Data",
    "section": "",
    "text": "A significant source of data was obtained using the nflreadr package. More information can be found here: Ho and Carl (2023).\n\n\n\n\nReferences\n\nHo, Tan, and Sebastian Carl. 2023. Nflreadr: Download ’Nflverse’ Data."
  },
  {
    "objectID": "introduction.html",
    "href": "introduction.html",
    "title": "Introduction",
    "section": "",
    "text": "Thomas Sigall - tns29\n\n\nDecision Making in Sports\nIn sports, as in all areas of life, there are a variety of decisions that actors can make as their game or competition unfolds. As a result, there are numerous decisions that can be made, each coming with their own level of risk. Some decisions are obvious, like tagging up from third base on a deep fly ball with less than two outs or punting on fourth and long when back at your own end zone. However, many more appear to not be so obvious, as evidenced by the variety of opinions that arise when observing these choices in action. Despite numerous advancements in analysis in many sports, decisions are still heavily debated on a daily basis. Even if analysis on other similar situations suggests one decision should be made, we often see the exact opposite on the field. Ward Edwards, in his 1954 paper “The theory of decision making” introduces this well, saying “The traditional mathematical notion for dealing with games of chance (and so with risky decisions) is the notion that choices should be made so as to maximize expected value… The assumption that people actually behave the way this mathematical notion says they should is contradicted by observable behavior in many risky situations” (Edwards 1954, 391).\nWhy do people behave this way? It goes against what we know about expected value and suggests that we are illogical actors. This is elaborated further by Daniel Kahneman and Amos Tversky in their influential 1979 paper “Prospect Theory: an Analysis of Decision Under Risk” in which they explain, “Choices among risky prospects exhibit several pervasive effects that are inconsistent with the basic tenets of utility theory” (Kahneman and Tversky 1979). This eventually leads them to an alternative theory of choice “in which value is assigned to gains and losses rather than to final assets and in which probabilities are replaced by decision weights” (Kahneman and Tversky 1979). Looking at a variety of sports through these alternative theories of choice could help to explain some inconsistent decisions that we see while we watch our favorite teams.\n\n\nQuestions\n\nHow are decisions in sports currently evaluated?\nCould we improve this evaluation process?\nWould improvements in this process lead to better decision making on the field?\nHow can we determine why certain decisions are made?\nHow can we apply alternative theories of choice to specific games?\nHow different would the sports landscape look if everything were optimized?\nAre there certain factors that theories of choice could not take into account?\nIf there truly is an optimal choice every time, would it be possible for anyone to coach a team?\nCan these principles be exteneded to off-field deicisons, such as team-building and player evaluation?\nAre unoptimized decisions part of what makes sports enjoyable?\n\n\n\n\n\n\n\n\n\nReferences\n\nEdwards, Ward. 1954. “The Theory of Decision Making.” Psychological Bulletin 51 (4): 380–417. https://doi.org/10.1037/h0053870.\n\n\nKahneman, Daniel, and Amos Tversky. 1979. “Prospect Theory: An Analysis of Decision Under Risk.” Econometrica 47 (2): 263. https://doi.org/10.2307/1914185."
  },
  {
    "objectID": "data_cleaning.html",
    "href": "data_cleaning.html",
    "title": "Data Cleaning",
    "section": "",
    "text": "head(raw_data)\n\n# A tibble: 6 × 383\n  play_id game_id      old_game_id home_team away_team season_type  week posteam\n    &lt;dbl&gt; &lt;chr&gt;        &lt;chr&gt;       &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;       &lt;int&gt; &lt;chr&gt;  \n1       1 2022_01_BAL… 2022091107  NYJ       BAL       REG             1 &lt;NA&gt;   \n2      43 2022_01_BAL… 2022091107  NYJ       BAL       REG             1 NYJ    \n3      68 2022_01_BAL… 2022091107  NYJ       BAL       REG             1 NYJ    \n4      89 2022_01_BAL… 2022091107  NYJ       BAL       REG             1 NYJ    \n5     115 2022_01_BAL… 2022091107  NYJ       BAL       REG             1 NYJ    \n6     136 2022_01_BAL… 2022091107  NYJ       BAL       REG             1 NYJ    \n# ℹ 375 more variables: posteam_type &lt;chr&gt;, defteam &lt;chr&gt;, side_of_field &lt;chr&gt;,\n#   yardline_100 &lt;dbl&gt;, game_date &lt;chr&gt;, quarter_seconds_remaining &lt;dbl&gt;,\n#   half_seconds_remaining &lt;dbl&gt;, game_seconds_remaining &lt;dbl&gt;,\n#   game_half &lt;chr&gt;, quarter_end &lt;dbl&gt;, drive &lt;dbl&gt;, sp &lt;dbl&gt;, qtr &lt;dbl&gt;,\n#   down &lt;dbl&gt;, goal_to_go &lt;dbl&gt;, time &lt;chr&gt;, yrdln &lt;chr&gt;, ydstogo &lt;dbl&gt;,\n#   ydsnet &lt;dbl&gt;, desc &lt;chr&gt;, play_type &lt;chr&gt;, yards_gained &lt;dbl&gt;,\n#   shotgun &lt;dbl&gt;, no_huddle &lt;dbl&gt;, qb_dropback &lt;dbl&gt;, qb_kneel &lt;dbl&gt;, …\n\n\nThere are a large number of columns in this data, taken from the 2022 NFL season, we do not need all 383. The purpose of this data is to help determine how coaches today approach 4th down, a basic yet essential decision in the NFL. To do this we only need to look at these columns:\n\nfourth_downs &lt;- raw_data %&gt;%\n    filter(!is.na(go_boost) & !is.na(go)) %&gt;%\n    select(home_coach, away_coach, posteam_type, ydstogo, yardline_100, posteam, go_boost, go, epa)\n\nhead(fourth_downs)\n\n# A tibble: 6 × 9\n  home_coach away_coach posteam_type ydstogo yardline_100 posteam go_boost    go\n  &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt;        &lt;dbl&gt; &lt;chr&gt;      &lt;dbl&gt; &lt;dbl&gt;\n1 Robert Sa… John Harb… home              15           64 NYJ       -3.45      0\n2 Robert Sa… John Harb… away               1           51 BAL        3.67      0\n3 Robert Sa… John Harb… home               9           82 NYJ       -2.07      0\n4 Robert Sa… John Harb… away               9           65 BAL       -1.01      0\n5 Robert Sa… John Harb… away               3            6 BAL        0.141     0\n6 Robert Sa… John Harb… home               1           66 NYJ        0.654     0\n# ℹ 1 more variable: epa &lt;dbl&gt;\n\n\nEach unit in this table is one 4th down decision. The variables include:\n\n\n\n\n\nVariable\nDefinition\n\n\n\n\nhome_coach\nHome Team Coach\n\n\naway_coach\nAway Team Coach\n\n\nposteam_type\nOffense Home or Away\n\n\nydstogo\nYards to Go\n\n\nyardline_100\nYardline Relative to End Zone\n\n\nposteam\nOffense Team\n\n\ngo_boost\nChange in Win Probability if Conversion Attempted\n\n\ngo\nConversion Attempted (T/F)\n\n\nepa\nEstimated Points Added as a Result of the Play\n\n\n\n\n\n\n\n\nfourth_decisions &lt;- fourth_downs %&gt;%\n    mutate(should_go = if_else((go == 100 & go_boost &gt; 0), 1, (if_else(go_boost &lt; 0, -1, 0))),\n           shouldnt_go = if_else((go == 0 & go_boost &lt; 0), 1, (if_else(go_boost &gt; 0, -1, 0))),\n           coach = if_else(posteam_type == \"home\", home_coach, away_coach),) %&gt;%\n    select(coach, ydstogo, yardline_100, go_boost, should_go, shouldnt_go, go, epa) %&gt;%\n    group_by(coach) %&gt;%\n    summarize(should_go = sum(should_go == 1) / (sum(should_go == 0 | should_go == 1)),\n              shouldnt_go = sum(shouldnt_go == 1) / (sum(shouldnt_go == 0 | shouldnt_go == 1)),\n              EPA = mean(epa),\n              count = n()) %&gt;%\n    filter(count &gt; 50)\n\n\nhead(fourth_decisions)\n\n# A tibble: 6 × 5\n  coach          should_go shouldnt_go      EPA count\n  &lt;chr&gt;              &lt;dbl&gt;       &lt;dbl&gt;    &lt;dbl&gt; &lt;int&gt;\n1 Andy Reid          0.216       0.982  0.0590    106\n2 Arthur Smith       0.333       0.985 -0.0540    114\n3 Bill Belichick     0.204       0.962 -0.221     128\n4 Brandon Staley     0.347       0.971 -0.00908   140\n5 Brian Daboll       0.361       0.949  0.159     139\n6 Dan Campbell       0.507       0.907 -0.00432   121\n\n\nThis data shows when coaches make the correct choice on 4th down, their average estimated points added on 4th downs throughout the season, and the number of 4th down decisions they had to make throughout the season.\n\n\n\nThe NFL subreddit is a useful place to extract text data produced by fans and their reaction to these essential decisions. Like most jobs, the goal of an NFL head coach is not only to win games, but to keep their bosses happy. The size and outspoken nature of NFL fan bases can be a factor in the job security of these coaches, as if a coach loses the fans, their job gets a lot harder. This is where sentiment analysis comes in, as getting an idea of how fans feel about 4th down decisions by certain coaches may give us insights into how they are making their decisions, and whether or not the fans have any influence on the decision making process.\n\nimport praw\nfrom sklearn.feature_extraction.text import CountVectorizer\nimport numpy as np\n\nreddit = praw.Reddit(\"bot1\")\n\nThis allows us to get posts from the NFL subreddit using a search query of “4th down” and access the comments of those posts.\n\nsubreddit = reddit.subreddit(\"nfl\")\nquery = \"4th down\"\n\ntop_posts = subreddit.search(query, limit=100)\nurls = []\ncorpus = []\n\nfor post in top_posts:\n    urls.append(post.permalink)\n    \nurl = \"https://www.reddit.com\" + urls[0]\n\nsubmission = reddit.submission(url=url)\n\nsubmission.comments.replace_more(limit=0)\n\n[&lt;MoreComments count=338, children=['g86rob4', 'g86w9sz', 'g86spfe', '...']&gt;, &lt;MoreComments count=50, children=['g86u1l0']&gt;, &lt;MoreComments count=22, children=['g87nr1u', 'g86u185']&gt;, &lt;MoreComments count=19, children=['g8746y9', 'g875lus']&gt;, &lt;MoreComments count=17, children=['g86our5']&gt;, &lt;MoreComments count=12, children=['g86ntis', 'g86pv9c', 'g86vsmi', '...']&gt;, &lt;MoreComments count=12, children=['g86tjz0', 'g88dxu3', 'g874r37', '...']&gt;, &lt;MoreComments count=10, children=['g86upwx', 'g86ultp']&gt;, &lt;MoreComments count=9, children=['g87k13x', 'g86o1j9', 'g87wsxf']&gt;, &lt;MoreComments count=8, children=['g86u97z', 'g86obcw', 'g86xpy6', '...']&gt;, &lt;MoreComments count=8, children=['g87c49d', 'g86ugsz', 'g877p0k', '...']&gt;, &lt;MoreComments count=7, children=['g877imq', 'g87kh7l', 'g89p26w', '...']&gt;, &lt;MoreComments count=7, children=['g88bvze', 'g87ku3m', 'g87nw1x', 'g872v4n']&gt;, &lt;MoreComments count=7, children=['g86x048', 'g87hqcz', 'g88a3uy', '...']&gt;, &lt;MoreComments count=7, children=['g87zpc7', 'g871cu5']&gt;, &lt;MoreComments count=7, children=['g86oxbu']&gt;, &lt;MoreComments count=6, children=['g87wwd7', 'g87wwjc', 'g86vugx', '...']&gt;, &lt;MoreComments count=6, children=['g86pq3e', 'g86qf9e']&gt;, &lt;MoreComments count=6, children=['g87vm0k', 'g86pf8w', 'g86pfpz', '...']&gt;, &lt;MoreComments count=6, children=['g86x90t', 'g87kfqf', 'g873sjz', '...']&gt;, &lt;MoreComments count=6, children=['g86oe3o', 'g87wg6e', 'g89gr1j', '...']&gt;, &lt;MoreComments count=6, children=['g86nunf', 'g86p8ze', 'g86pwzt']&gt;, &lt;MoreComments count=5, children=['g87om4z', 'g879zcg', 'g89bpxg', '...']&gt;, &lt;MoreComments count=5, children=['g875x3g', 'g87wek1', 'g88cq9i', 'g87he5o']&gt;, &lt;MoreComments count=5, children=['g86pm76', 'g86oovd', 'g86q9m2', 'g86qref']&gt;, &lt;MoreComments count=5, children=['g86qv3t', 'g86p7g9']&gt;, &lt;MoreComments count=5, children=['g86mmlt']&gt;, &lt;MoreComments count=5, children=['g86rchy', 'g86pjic', 'g880745', '...']&gt;, &lt;MoreComments count=4, children=['g87ew8h', 'g87k6p8', 'g87jhql']&gt;, &lt;MoreComments count=4, children=['g87ytxi', 'g880kl5', 'g894n3r', 'g87hy0v']&gt;, &lt;MoreComments count=4, children=['g87nonn']&gt;, &lt;MoreComments count=4, children=['g86nwop', 'g87ow5j', 'g87qauz', 'g87vmct']&gt;, &lt;MoreComments count=4, children=['g87wp4y', 'g89huil', 'g87rk8a', 'g87lg55']&gt;, &lt;MoreComments count=4, children=['g86mpf7']&gt;, &lt;MoreComments count=4, children=['g86oeio']&gt;, &lt;MoreComments count=4, children=['g874vc3', 'g8e3loc', 'g886pd3', 'g88dkoi']&gt;, &lt;MoreComments count=4, children=['g86ogod', 'g87qjnp', 'g872n2e', 'g876gqt']&gt;, &lt;MoreComments count=4, children=['g86ukn3', 'g87d9kl', 'g87oqnq', 'g87ysi7']&gt;, &lt;MoreComments count=3, children=['g879prv']&gt;, &lt;MoreComments count=3, children=['g86zsko', 'g88axm6', 'g86q1s4']&gt;, &lt;MoreComments count=3, children=['g86pay4', 'g87otas', 'g87k6sg']&gt;, &lt;MoreComments count=3, children=['g86yhep', 'g86ygl3']&gt;, &lt;MoreComments count=3, children=['g87olne', 'g8929l8', 'g86o40j']&gt;, &lt;MoreComments count=3, children=['g86xw1q']&gt;, &lt;MoreComments count=3, children=['g871pb4', 'g86y4mx']&gt;, &lt;MoreComments count=3, children=['g87zu94', 'g86pv9z', 'g879cof']&gt;, &lt;MoreComments count=3, children=['g86xjh8', 'g86pzw1']&gt;, &lt;MoreComments count=3, children=['g86sf6e', 'g86mh2g', 'g86my9d']&gt;, &lt;MoreComments count=2, children=['g874wl8']&gt;, &lt;MoreComments count=2, children=['g870t7q', 'g885p2g']&gt;, &lt;MoreComments count=2, children=['g87wk8t', 'g88y0jc']&gt;, &lt;MoreComments count=2, children=['g86r7n9']&gt;, &lt;MoreComments count=2, children=['g8704vj', 'g87mtxl']&gt;, &lt;MoreComments count=2, children=['g87b3xf']&gt;, &lt;MoreComments count=2, children=['g87e6hp', 'g888azh']&gt;, &lt;MoreComments count=2, children=['g86tpwq', 'g878ucd']&gt;, &lt;MoreComments count=2, children=['g87nw3t', 'g86obxo']&gt;, &lt;MoreComments count=2, children=['g87y03d']&gt;, &lt;MoreComments count=2, children=['g89c4g3', 'g87uem0']&gt;, &lt;MoreComments count=2, children=['g87fyi2']&gt;, &lt;MoreComments count=2, children=['g87phtp', 'g88c7wy']&gt;, &lt;MoreComments count=2, children=['g86qmwx', 'g899flo']&gt;, &lt;MoreComments count=2, children=['g87v13k', 'g87nnlw']&gt;, &lt;MoreComments count=2, children=['g87t7tm']&gt;, &lt;MoreComments count=2, children=['g86ox5p', 'g86owzs']&gt;, &lt;MoreComments count=2, children=['g895s2u', 'g86siam']&gt;, &lt;MoreComments count=2, children=['g8akn8y', 'g88efwp']&gt;, &lt;MoreComments count=2, children=['g87k42o']&gt;, &lt;MoreComments count=2, children=['g87ngmh']&gt;, &lt;MoreComments count=2, children=['g87zz7b', 'g88cu86']&gt;, &lt;MoreComments count=2, children=['g86pqwz', 'g870n6c']&gt;, &lt;MoreComments count=2, children=['g86n2n2', 'g86n6w9']&gt;, &lt;MoreComments count=2, children=['g879n3n', 'g86p3iv']&gt;, &lt;MoreComments count=2, children=['g87n2tn']&gt;, &lt;MoreComments count=2, children=['g86p2uz']&gt;, &lt;MoreComments count=1, children=['g87jw2s']&gt;, &lt;MoreComments count=1, children=['g87o0ww']&gt;, &lt;MoreComments count=1, children=['g8859tg']&gt;, &lt;MoreComments count=1, children=['g87lb0g']&gt;, &lt;MoreComments count=1, children=['g86o3mx']&gt;, &lt;MoreComments count=1, children=['g89g34g']&gt;, &lt;MoreComments count=1, children=['g8951hu']&gt;, &lt;MoreComments count=1, children=['g8e306j']&gt;, &lt;MoreComments count=1, children=['g870ebz']&gt;, &lt;MoreComments count=1, children=['g87jzm1']&gt;, &lt;MoreComments count=1, children=['g86sm53']&gt;, &lt;MoreComments count=1, children=['g87ciya']&gt;, &lt;MoreComments count=1, children=['g86t4m1']&gt;, &lt;MoreComments count=1, children=['g8848rf']&gt;, &lt;MoreComments count=1, children=['g86qsx2']&gt;, &lt;MoreComments count=1, children=['g8756qe']&gt;, &lt;MoreComments count=1, children=['g87sc6e']&gt;, &lt;MoreComments count=1, children=['g874mh9']&gt;, &lt;MoreComments count=1, children=['g86ohna']&gt;, &lt;MoreComments count=1, children=['g87gnx5']&gt;, &lt;MoreComments count=1, children=['g87u15i']&gt;, &lt;MoreComments count=1, children=['g87jhuj']&gt;, &lt;MoreComments count=1, children=['g87wmzv']&gt;, &lt;MoreComments count=1, children=['g875ryb']&gt;, &lt;MoreComments count=1, children=['g87jnpo']&gt;, &lt;MoreComments count=1, children=['g86pl6b']&gt;, &lt;MoreComments count=1, children=['g87a5bk']&gt;, &lt;MoreComments count=1, children=['g86t5fr']&gt;, &lt;MoreComments count=1, children=['g88b1v8']&gt;, &lt;MoreComments count=1, children=['g87kqr0']&gt;, &lt;MoreComments count=1, children=['g8aa339']&gt;, &lt;MoreComments count=1, children=['g86r39d']&gt;, &lt;MoreComments count=1, children=['g89g68w']&gt;, &lt;MoreComments count=1, children=['g86p7hq']&gt;, &lt;MoreComments count=1, children=['g881vl7']&gt;, &lt;MoreComments count=1, children=['g88i16j']&gt;, &lt;MoreComments count=1, children=['g8a1lbd']&gt;, &lt;MoreComments count=1, children=['g88hgq4']&gt;, &lt;MoreComments count=1, children=['g88ukf7']&gt;, &lt;MoreComments count=1, children=['g87eizr']&gt;, &lt;MoreComments count=1, children=['g87itku']&gt;, &lt;MoreComments count=1, children=['g88485u']&gt;, &lt;MoreComments count=1, children=['g87k178']&gt;, &lt;MoreComments count=1, children=['g881pf9']&gt;, &lt;MoreComments count=1, children=['g86u0y6']&gt;, &lt;MoreComments count=1, children=['g88wwdf']&gt;, &lt;MoreComments count=1, children=['g86odkd']&gt;, &lt;MoreComments count=1, children=['g88y2nq']&gt;, &lt;MoreComments count=1, children=['g87xzn3']&gt;, &lt;MoreComments count=1, children=['g87xclj']&gt;, &lt;MoreComments count=1, children=['g880q35']&gt;, &lt;MoreComments count=1, children=['g88rs81']&gt;, &lt;MoreComments count=1, children=['g883f06']&gt;, &lt;MoreComments count=1, children=['g88xnri']&gt;, &lt;MoreComments count=1, children=['g86qy7i']&gt;, &lt;MoreComments count=1, children=['g88j9de']&gt;, &lt;MoreComments count=1, children=['g87diha']&gt;, &lt;MoreComments count=1, children=['g87ee9l']&gt;, &lt;MoreComments count=1, children=['g86p0yh']&gt;, &lt;MoreComments count=1, children=['g87fesb']&gt;, &lt;MoreComments count=1, children=['g87yg5m']&gt;, &lt;MoreComments count=1, children=['g874k32']&gt;, &lt;MoreComments count=1, children=['g88qa51']&gt;, &lt;MoreComments count=1, children=['g89fx4d']&gt;, &lt;MoreComments count=1, children=['g88hrnr']&gt;, &lt;MoreComments count=1, children=['g8849qs']&gt;, &lt;MoreComments count=0, children=[]&gt;, &lt;MoreComments count=0, children=[]&gt;]\n\nfor top_level_comment in submission.comments:\n    corpus.append(top_level_comment.body)\n\nvectorizer=CountVectorizer()\nXs = vectorizer.fit_transform(corpus)\n\ncol_names=vectorizer.get_feature_names_out()\n\nThe overall sentiment from this brief analysis is a positive one, but the search terms need to be more specific to get any useful information out of this process.\n\nfrom nltk.sentiment import SentimentIntensityAnalyzer\n\noverall = []\nsia = SentimentIntensityAnalyzer()\n\nfor text in corpus:\n  score=sia.polarity_scores(text)\n  overall.append(score['compound'])\n\n\n\nsum(overall)/len(overall)\n\n0.03216993006993008\n\n\n\nsave(fourth_decisions, fourth_downs, file = \"clean_data.Rdata\")"
  },
  {
    "objectID": "data_exploration.html",
    "href": "data_exploration.html",
    "title": "Data Exploration",
    "section": "",
    "text": "load(\"clean_data.Rdata\")\n\n\n4th Down Statistics\nHow often do coaches go for it when they should?\n\np &lt;- ggplot(data = fourth_decisions, aes(x = should_go)) + \n  geom_histogram(binwidth = 0.1)\n\np"
  },
  {
    "objectID": "data_cleaning.html#th-down-data",
    "href": "data_cleaning.html#th-down-data",
    "title": "Data Cleaning",
    "section": "",
    "text": "head(raw_data)\n\n# A tibble: 6 × 383\n  play_id game_id      old_game_id home_team away_team season_type  week posteam\n    &lt;dbl&gt; &lt;chr&gt;        &lt;chr&gt;       &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;       &lt;int&gt; &lt;chr&gt;  \n1       1 2022_01_BAL… 2022091107  NYJ       BAL       REG             1 &lt;NA&gt;   \n2      43 2022_01_BAL… 2022091107  NYJ       BAL       REG             1 NYJ    \n3      68 2022_01_BAL… 2022091107  NYJ       BAL       REG             1 NYJ    \n4      89 2022_01_BAL… 2022091107  NYJ       BAL       REG             1 NYJ    \n5     115 2022_01_BAL… 2022091107  NYJ       BAL       REG             1 NYJ    \n6     136 2022_01_BAL… 2022091107  NYJ       BAL       REG             1 NYJ    \n# ℹ 375 more variables: posteam_type &lt;chr&gt;, defteam &lt;chr&gt;, side_of_field &lt;chr&gt;,\n#   yardline_100 &lt;dbl&gt;, game_date &lt;chr&gt;, quarter_seconds_remaining &lt;dbl&gt;,\n#   half_seconds_remaining &lt;dbl&gt;, game_seconds_remaining &lt;dbl&gt;,\n#   game_half &lt;chr&gt;, quarter_end &lt;dbl&gt;, drive &lt;dbl&gt;, sp &lt;dbl&gt;, qtr &lt;dbl&gt;,\n#   down &lt;dbl&gt;, goal_to_go &lt;dbl&gt;, time &lt;chr&gt;, yrdln &lt;chr&gt;, ydstogo &lt;dbl&gt;,\n#   ydsnet &lt;dbl&gt;, desc &lt;chr&gt;, play_type &lt;chr&gt;, yards_gained &lt;dbl&gt;,\n#   shotgun &lt;dbl&gt;, no_huddle &lt;dbl&gt;, qb_dropback &lt;dbl&gt;, qb_kneel &lt;dbl&gt;, …\n\n\nThere are a large number of columns in this data, taken from the 2022 NFL season, we do not need all 383. The purpose of this data is to help determine how coaches today approach 4th down, a basic yet essential decision in the NFL. To do this we only need to look at these columns:\n\nfourth_downs &lt;- raw_data %&gt;%\n    filter(!is.na(go_boost) & !is.na(go)) %&gt;%\n    select(home_coach, away_coach, posteam_type, ydstogo, yardline_100, posteam, go_boost, go, epa)\n\nhead(fourth_downs)\n\n# A tibble: 6 × 9\n  home_coach away_coach posteam_type ydstogo yardline_100 posteam go_boost    go\n  &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt;        &lt;dbl&gt; &lt;chr&gt;      &lt;dbl&gt; &lt;dbl&gt;\n1 Robert Sa… John Harb… home              15           64 NYJ       -3.45      0\n2 Robert Sa… John Harb… away               1           51 BAL        3.67      0\n3 Robert Sa… John Harb… home               9           82 NYJ       -2.07      0\n4 Robert Sa… John Harb… away               9           65 BAL       -1.01      0\n5 Robert Sa… John Harb… away               3            6 BAL        0.141     0\n6 Robert Sa… John Harb… home               1           66 NYJ        0.654     0\n# ℹ 1 more variable: epa &lt;dbl&gt;\n\n\nEach unit in this table is one 4th down decision. The variables include:\n\n\n\n\n\nVariable\nDefinition\n\n\n\n\nhome_coach\nHome Team Coach\n\n\naway_coach\nAway Team Coach\n\n\nposteam_type\nOffense Home or Away\n\n\nydstogo\nYards to Go\n\n\nyardline_100\nYardline Relative to End Zone\n\n\nposteam\nOffense Team\n\n\ngo_boost\nChange in Win Probability if Conversion Attempted\n\n\ngo\nConversion Attempted (T/F)\n\n\nepa\nEstimated Points Added as a Result of the Play\n\n\n\n\n\n\n\n\nfourth_decisions &lt;- fourth_downs %&gt;%\n    mutate(should_go = if_else((go == 100 & go_boost &gt; 0), 1, (if_else(go_boost &lt; 0, -1, 0))),\n           shouldnt_go = if_else((go == 0 & go_boost &lt; 0), 1, (if_else(go_boost &gt; 0, -1, 0))),\n           coach = if_else(posteam_type == \"home\", home_coach, away_coach),) %&gt;%\n    select(coach, ydstogo, yardline_100, go_boost, should_go, shouldnt_go, go, epa) %&gt;%\n    group_by(coach) %&gt;%\n    summarize(should_go = sum(should_go == 1) / (sum(should_go == 0 | should_go == 1)),\n              shouldnt_go = sum(shouldnt_go == 1) / (sum(shouldnt_go == 0 | shouldnt_go == 1)),\n              EPA = mean(epa),\n              count = n()) %&gt;%\n    filter(count &gt; 50)\n\n\nhead(fourth_decisions)\n\n# A tibble: 6 × 5\n  coach          should_go shouldnt_go      EPA count\n  &lt;chr&gt;              &lt;dbl&gt;       &lt;dbl&gt;    &lt;dbl&gt; &lt;int&gt;\n1 Andy Reid          0.216       0.982  0.0590    106\n2 Arthur Smith       0.333       0.985 -0.0540    114\n3 Bill Belichick     0.204       0.962 -0.221     128\n4 Brandon Staley     0.347       0.971 -0.00908   140\n5 Brian Daboll       0.361       0.949  0.159     139\n6 Dan Campbell       0.507       0.907 -0.00432   121\n\n\nThis data shows when coaches make the correct choice on 4th down, their average estimated points added on 4th downs throughout the season, and the number of 4th down decisions they had to make throughout the season."
  },
  {
    "objectID": "data_cleaning.html#text-data",
    "href": "data_cleaning.html#text-data",
    "title": "Data Cleaning",
    "section": "Text Data",
    "text": "Text Data\n\nimport praw\nfrom sklearn.feature_extraction.text import CountVectorizer\nimport numpy as np\n\nreddit = praw.Reddit(\n  client_id = \"29BtHHkcVmVjeZfAU5Mfbw\",\n  client_secret = \"m8eoqej8ylk3LLG-n6TE1irUHOtxGw\",\n  user_agent = \"TNS621\"\n)\n\n\nsubreddit = reddit.subreddit(\"nfl\")\nquery = \"4th down\"\n\ntop_posts = subreddit.search(query, limit=100)\ncorpus = []\n\nfor post in top_posts:\n    corpus.append(post.title)\n\nvectorizer=CountVectorizer()   \nXs = vectorizer.fit_transform(corpus)\n\ncol_names=vectorizer.get_feature_names_out()\nprint(\"col_names=\",col_names)\n\ncol_names= ['100' '106' '13' '14' '158' '16' '18' '19' '1991' '1st' '20' '2009'\n '2014' '2017' '25' '27' '29' '30' '302' '34' '3rd' '49ers' '4th' '51'\n '65' '74' '83' '90' '91' '92' 'aaron' 'about' 'according' 'actually'\n 'adam' 'adams' 'adamteicher' 'admitted' 'afc' 'after' 'ago' 'aidan' 'all'\n 'allen' 'allow' 'already' 'an' 'and' 'andy' 'angeles' 'another' 'antonio'\n 'are' 'as' 'asked' 'at' 'attempt' 'attempts' 'avatar' 'avoids' 'away'\n 'back' 'baker' 'bal' 'baldwin' 'ball' 'be' 'bears' 'became' 'become'\n 'before' 'being' 'belichick' 'ben' 'bengals' 'best' 'better' 'big'\n 'bills' 'booong' 'boos' 'bootleg' 'bot' 'bow' 'brady' 'brandon' 'breakup'\n 'brown' 'browns' 'bryant' 'bumped' 'burke' 'burton' 'by' 'byu' 'call'\n 'called' 'calls' 'came' 'can' 'cannot' 'card' 'career' 'carolina' 'carr'\n 'catch' 'cbs' 'cement' 'cementing' 'changes' 'chargers' 'chart' 'chi'\n 'chicago' 'chiefs' 'cin' 'clark' 'class' 'clinch' 'clock' 'clutch'\n 'coach' 'coaching' 'coleman' 'colliding' 'colt' 'colts' 'combined'\n 'coming' 'completed' 'completely' 'completions' 'conduct' 'confused'\n 'conversion' 'conversions' 'convert' 'converting' 'converts' 'convinced'\n 'cooking' 'couldn' 'cousins' 'cowboys' 'crazy' 'critical' 'crowd' 'dak'\n 'dallas' 'dalton' 'darnell' 'davante' 'davis' 'debut' 'decides'\n 'decision' 'deebo' 'deep' 'defense' 'defining' 'deflects' 'delay'\n 'denzel' 'deshone' 'desmond' 'despite' 'devonta' 'did' 'didn' 'different'\n 'divisional' 'doesn' 'doug' 'dov' 'down' 'downs' 'drops' 'dugger'\n 'during' 'eagles' 'earlier' 'earned' 'edelman' 'elam' 'eliassports' 'end'\n 'endzone' 'eric' 'espn' 'estimated' 'etienne' 'evans' 'even' 'ever'\n 'every' 'expletives' 'fail' 'failed' 'fake' 'fans' 'fell' 'fg' 'field'\n 'fields' 'final' 'find' 'finds' 'firing' 'first' 'foles' 'for' 'forces'\n 'forder' 'foul' 'fox' 'from' 'gabe' 'gained' 'gamble' 'game' 'gardner'\n 'gb' 'geno' 'get' 'gets' 'giants' 'give' 'giving' 'go' 'goal' 'god'\n 'godert' 'goes' 'goff' 'golden' 'gone' 'goodwin' 'got' 'grade' 'grier'\n 'ground' 'gutsy' 'had' 'handed' 'harbaugh' 'hard' 'hasn' 'have' 'hc' 'he'\n 'held' 'hell' 'helman' 'herbert' 'highlight' 'hill' 'him' 'himself' 'his'\n 'history' 'hit' 'hits' 'hold' 'hutchinson' 'if' 'image' 'imagine' 'in'\n 'incomplete' 'incredible' 'ind' 'intercepted' 'interference' 'into' 'is'\n 'it' 'jabrill' 'jackson' 'jags' 'jaguars' 'jamaal' 'jared' 'jets' 'jimmy'\n 'john' 'jones' 'josh' 'judon' 'julian' 'julio' 'just' 'justin' 'kaiir'\n 'kc' 'keenum' 'kelce' 'kick' 'kizer' 'kleiman' 'knocks' 'knows' 'kyle'\n 'kyler' 'la' 'lamar' 'lar' 'last' 'lattimore' 'lead' 'left' 'life'\n 'lions' 'longest' 'look' 'los' 'lost' 'lvi' 'mahomes' 'makes' 'marker'\n 'marshon' 'matt' 'matthew' 'may' 'mayfield' 'mccarthy' 'mccoy'\n 'mcdermott' 'mcvay' 'metcalf' 'miami' 'mike' 'min' 'minshew' 'minute'\n 'minutes' 'missed' 'month' 'murray' 'my' 'myles' 'ndamukong' 'never'\n 'nfl' 'nick' 'not' 'nothing' 'nowhere' 'oc' 'october' 'of' 'off'\n 'officials' 'okwara' 'on' 'one' 'open' 'or' 'original' 'out' 'outside'\n 'over' 'overtime' 'own' 'packers' 'panthers' 'pass' 'passer' 'pats'\n 'pederson' 'penalty' 'pepper' 'per' 'perfect' 'personal' 'pff' 'phi'\n 'pick' 'planet' 'play' 'playcalling' 'playoffs' 'plays' 'points'\n 'pressure' 'pressures' 'pretty' 'probability' 'provides' 'punt' 'qb'\n 'quarterback' 'quarters' 'raiders' 'rams' 'ran' 'rate' 'rating' 'ravens'\n 're' 'reception' 'recommendation' 'record' 'red' 'regular' 'reid'\n 'renfrow' 'returns' 'ridder' 'robinson' 'rodgers' 'rolls' 'romo' 'ronald'\n 'round' 'run' 'runs' 'rush' 'russell' 'sacks' 'sauce' 'savage' 'save'\n 'sb' 'scared' 'schefter' 'score' 'scores' 'sea' 'seahawks' 'sean'\n 'season' 'seasons' 'second' 'seconds' 'seen' 'set' 'sharp' 'short' 'shot'\n 'similar' 'since' 'sixes' 'smith' 'snapped' 'sneaks' 'someone'\n 'something' 'sound' 'south' 'sports' 'spurrier' 'staley' 'starter'\n 'stathead' 'steelers' 'stifles' 'still' 'stop' 'stopped' 'stops' 'strip'\n 'strongest' 'stuffed' 'suh' 'sun' 'sure' 'system' 'tackle' 'take' 'takes'\n 'tariq' 'tate' 'td' 'team' 'territory' 'that' 'the' 'their' 'they'\n 'thing' 'third' 'thirty' 'this' 'though' 'thought' 'throw' 'throwback'\n 'throwing' 'throws' 'thursday' 'time' 'timeouts' 'times' 'tipped' 'to'\n 'today' 'told' 'tom' 'tonight' 'top' 'total' 'touch' 'touchdown'\n 'touchdowns' 'touching' 'trade' 'travis' 'trey' 'tried' 'tua' 'turn'\n 'turnover' 'twice' 'twitter' 'tyreek' 'ugly' 'unless' 'unsportsmanlike'\n 'up' 've' 'victim' 'vs' 'ward' 'was' 'watch' 'weddle' 'went' 'were' 'wft'\n 'what' 'when' 'while' 'whose' 'wide' 'wild' 'wildcat' 'will' 'williams'\n 'wilson' 'win' 'winning' 'wisconsin' 'with' 'won' 'woolen' 'work' 'worst'\n 'yard' 'yards' 'yates' 'years' 'yes' 'yesterday' 'you' 'yours' 'zero'\n 'zone']"
  },
  {
    "objectID": "data_gathering.html",
    "href": "data_gathering.html",
    "title": "Data Gathering",
    "section": "",
    "text": "Data\nData to evaluate NFL decision making was gathered by using the nflreadr package [@nflverse]. The creators of this package provide detailed instructions and examples on how to use and clean this data, which can be found at their website here.\n\nlibrary(nflverse)\n\n── Attaching packages ──────────────────────────────────────── nflverse 1.0.2 ──\n\n\n✔ nflfastR 4.5.1     ✔ nflreadr 1.3.2\n✔ nflseedR 1.2.0     ✔ nflplotR 1.1.0\n✔ nfl4th   1.0.2     \n\n\n──────────────────────────────────────────────────────────────── Ready to go! ──\n\nraw_data &lt;- load_4th_pbp(2022)\n\nLoading season 2022\n\n\nComputing probabilities for 4196 plays. . .\n\n\n[21:20:38] WARNING: src/learner.cc:553: \n  If you are loading a serialized model (like pickle in Python, RDS in R) generated by\n  older XGBoost, please export the model by calling `Booster.save_model` from that version\n  first, then load it back in current version. See:\n\n    https://xgboost.readthedocs.io/en/latest/tutorials/saving_model.html\n\n  for more details about differences between saving model and serializing.\n\n[21:20:55] WARNING: src/learner.cc:553: \n  If you are loading a serialized model (like pickle in Python, RDS in R) generated by\n  older XGBoost, please export the model by calling `Booster.save_model` from that version\n  first, then load it back in current version. See:\n\n    https://xgboost.readthedocs.io/en/latest/tutorials/saving_model.html\n\n  for more details about differences between saving model and serializing.\n\n[21:20:55] WARNING: src/learner.cc:553: \n  If you are loading a serialized model (like pickle in Python, RDS in R) generated by\n  older XGBoost, please export the model by calling `Booster.save_model` from that version\n  first, then load it back in current version. See:\n\n    https://xgboost.readthedocs.io/en/latest/tutorials/saving_model.html\n\n  for more details about differences between saving model and serializing.\n\n[21:20:55] WARNING: src/learner.cc:553: \n  If you are loading a serialized model (like pickle in Python, RDS in R) generated by\n  older XGBoost, please export the model by calling `Booster.save_model` from that version\n  first, then load it back in current version. See:\n\n    https://xgboost.readthedocs.io/en/latest/tutorials/saving_model.html\n\n  for more details about differences between saving model and serializing.\n\n\n\nsave(raw_data, file = \"raw_nfl.Rdata\")"
  },
  {
    "objectID": "data_cleaning.html#sentiment-analysis",
    "href": "data_cleaning.html#sentiment-analysis",
    "title": "Data Cleaning",
    "section": "",
    "text": "The NFL subreddit is a useful place to extract text data produced by fans and their reaction to these essential decisions. Like most jobs, the goal of an NFL head coach is not only to win games, but to keep their bosses happy. The size and outspoken nature of NFL fan bases can be a factor in the job security of these coaches, as if a coach loses the fans, their job gets a lot harder. This is where sentiment analysis comes in, as getting an idea of how fans feel about 4th down decisions by certain coaches may give us insights into how they are making their decisions, and whether or not the fans have any influence on the decision making process.\n\nimport praw\nfrom sklearn.feature_extraction.text import CountVectorizer\nimport numpy as np\n\nreddit = praw.Reddit(\"bot1\")\n\nThis allows us to get posts from the NFL subreddit using a search query of “4th down” and access the comments of those posts.\n\nsubreddit = reddit.subreddit(\"nfl\")\nquery = \"4th down\"\n\ntop_posts = subreddit.search(query, limit=100)\nurls = []\ncorpus = []\n\nfor post in top_posts:\n    urls.append(post.permalink)\n    \nurl = \"https://www.reddit.com\" + urls[0]\n\nsubmission = reddit.submission(url=url)\n\nsubmission.comments.replace_more(limit=0)\n\n[&lt;MoreComments count=338, children=['g86rob4', 'g86w9sz', 'g86spfe', '...']&gt;, &lt;MoreComments count=50, children=['g86u1l0']&gt;, &lt;MoreComments count=22, children=['g87nr1u', 'g86u185']&gt;, &lt;MoreComments count=19, children=['g8746y9', 'g875lus']&gt;, &lt;MoreComments count=17, children=['g86our5']&gt;, &lt;MoreComments count=12, children=['g86ntis', 'g86pv9c', 'g86vsmi', '...']&gt;, &lt;MoreComments count=12, children=['g86tjz0', 'g88dxu3', 'g874r37', '...']&gt;, &lt;MoreComments count=10, children=['g86upwx', 'g86ultp']&gt;, &lt;MoreComments count=9, children=['g87k13x', 'g86o1j9', 'g87wsxf']&gt;, &lt;MoreComments count=8, children=['g86u97z', 'g86obcw', 'g86xpy6', '...']&gt;, &lt;MoreComments count=8, children=['g87c49d', 'g86ugsz', 'g877p0k', '...']&gt;, &lt;MoreComments count=7, children=['g877imq', 'g87kh7l', 'g89p26w', '...']&gt;, &lt;MoreComments count=7, children=['g88bvze', 'g87ku3m', 'g87nw1x', 'g872v4n']&gt;, &lt;MoreComments count=7, children=['g86x048', 'g87hqcz', 'g88a3uy', '...']&gt;, &lt;MoreComments count=7, children=['g87zpc7', 'g871cu5']&gt;, &lt;MoreComments count=7, children=['g86oxbu']&gt;, &lt;MoreComments count=6, children=['g87wwd7', 'g87wwjc', 'g86vugx', '...']&gt;, &lt;MoreComments count=6, children=['g86pq3e', 'g86qf9e']&gt;, &lt;MoreComments count=6, children=['g87vm0k', 'g86pf8w', 'g86pfpz', '...']&gt;, &lt;MoreComments count=6, children=['g86x90t', 'g87kfqf', 'g873sjz', '...']&gt;, &lt;MoreComments count=6, children=['g86oe3o', 'g87wg6e', 'g89gr1j', '...']&gt;, &lt;MoreComments count=6, children=['g86nunf', 'g86p8ze', 'g86pwzt']&gt;, &lt;MoreComments count=5, children=['g87om4z', 'g879zcg', 'g89bpxg', '...']&gt;, &lt;MoreComments count=5, children=['g875x3g', 'g87wek1', 'g88cq9i', 'g87he5o']&gt;, &lt;MoreComments count=5, children=['g86pm76', 'g86oovd', 'g86q9m2', 'g86qref']&gt;, &lt;MoreComments count=5, children=['g86qv3t', 'g86p7g9']&gt;, &lt;MoreComments count=5, children=['g86mmlt']&gt;, &lt;MoreComments count=5, children=['g86rchy', 'g86pjic', 'g880745', '...']&gt;, &lt;MoreComments count=4, children=['g87ew8h', 'g87k6p8', 'g87jhql']&gt;, &lt;MoreComments count=4, children=['g87ytxi', 'g880kl5', 'g894n3r', 'g87hy0v']&gt;, &lt;MoreComments count=4, children=['g87nonn']&gt;, &lt;MoreComments count=4, children=['g86nwop', 'g87ow5j', 'g87qauz', 'g87vmct']&gt;, &lt;MoreComments count=4, children=['g87wp4y', 'g89huil', 'g87rk8a', 'g87lg55']&gt;, &lt;MoreComments count=4, children=['g86mpf7']&gt;, &lt;MoreComments count=4, children=['g86oeio']&gt;, &lt;MoreComments count=4, children=['g874vc3', 'g8e3loc', 'g886pd3', 'g88dkoi']&gt;, &lt;MoreComments count=4, children=['g86ogod', 'g87qjnp', 'g872n2e', 'g876gqt']&gt;, &lt;MoreComments count=4, children=['g86ukn3', 'g87d9kl', 'g87oqnq', 'g87ysi7']&gt;, &lt;MoreComments count=3, children=['g879prv']&gt;, &lt;MoreComments count=3, children=['g86zsko', 'g88axm6', 'g86q1s4']&gt;, &lt;MoreComments count=3, children=['g86pay4', 'g87otas', 'g87k6sg']&gt;, &lt;MoreComments count=3, children=['g86yhep', 'g86ygl3']&gt;, &lt;MoreComments count=3, children=['g87olne', 'g8929l8', 'g86o40j']&gt;, &lt;MoreComments count=3, children=['g86xw1q']&gt;, &lt;MoreComments count=3, children=['g871pb4', 'g86y4mx']&gt;, &lt;MoreComments count=3, children=['g87zu94', 'g86pv9z', 'g879cof']&gt;, &lt;MoreComments count=3, children=['g86xjh8', 'g86pzw1']&gt;, &lt;MoreComments count=3, children=['g86sf6e', 'g86mh2g', 'g86my9d']&gt;, &lt;MoreComments count=2, children=['g874wl8']&gt;, &lt;MoreComments count=2, children=['g870t7q', 'g885p2g']&gt;, &lt;MoreComments count=2, children=['g87wk8t', 'g88y0jc']&gt;, &lt;MoreComments count=2, children=['g86r7n9']&gt;, &lt;MoreComments count=2, children=['g8704vj', 'g87mtxl']&gt;, &lt;MoreComments count=2, children=['g87b3xf']&gt;, &lt;MoreComments count=2, children=['g87e6hp', 'g888azh']&gt;, &lt;MoreComments count=2, children=['g86tpwq', 'g878ucd']&gt;, &lt;MoreComments count=2, children=['g87nw3t', 'g86obxo']&gt;, &lt;MoreComments count=2, children=['g87y03d']&gt;, &lt;MoreComments count=2, children=['g89c4g3', 'g87uem0']&gt;, &lt;MoreComments count=2, children=['g87fyi2']&gt;, &lt;MoreComments count=2, children=['g87phtp', 'g88c7wy']&gt;, &lt;MoreComments count=2, children=['g86qmwx', 'g899flo']&gt;, &lt;MoreComments count=2, children=['g87v13k', 'g87nnlw']&gt;, &lt;MoreComments count=2, children=['g87t7tm']&gt;, &lt;MoreComments count=2, children=['g86ox5p', 'g86owzs']&gt;, &lt;MoreComments count=2, children=['g895s2u', 'g86siam']&gt;, &lt;MoreComments count=2, children=['g8akn8y', 'g88efwp']&gt;, &lt;MoreComments count=2, children=['g87k42o']&gt;, &lt;MoreComments count=2, children=['g87ngmh']&gt;, &lt;MoreComments count=2, children=['g87zz7b', 'g88cu86']&gt;, &lt;MoreComments count=2, children=['g86pqwz', 'g870n6c']&gt;, &lt;MoreComments count=2, children=['g86n2n2', 'g86n6w9']&gt;, &lt;MoreComments count=2, children=['g879n3n', 'g86p3iv']&gt;, &lt;MoreComments count=2, children=['g87n2tn']&gt;, &lt;MoreComments count=2, children=['g86p2uz']&gt;, &lt;MoreComments count=1, children=['g87jw2s']&gt;, &lt;MoreComments count=1, children=['g87o0ww']&gt;, &lt;MoreComments count=1, children=['g8859tg']&gt;, &lt;MoreComments count=1, children=['g87lb0g']&gt;, &lt;MoreComments count=1, children=['g86o3mx']&gt;, &lt;MoreComments count=1, children=['g89g34g']&gt;, &lt;MoreComments count=1, children=['g8951hu']&gt;, &lt;MoreComments count=1, children=['g8e306j']&gt;, &lt;MoreComments count=1, children=['g870ebz']&gt;, &lt;MoreComments count=1, children=['g87jzm1']&gt;, &lt;MoreComments count=1, children=['g86sm53']&gt;, &lt;MoreComments count=1, children=['g87ciya']&gt;, &lt;MoreComments count=1, children=['g86t4m1']&gt;, &lt;MoreComments count=1, children=['g8848rf']&gt;, &lt;MoreComments count=1, children=['g86qsx2']&gt;, &lt;MoreComments count=1, children=['g8756qe']&gt;, &lt;MoreComments count=1, children=['g87sc6e']&gt;, &lt;MoreComments count=1, children=['g874mh9']&gt;, &lt;MoreComments count=1, children=['g86ohna']&gt;, &lt;MoreComments count=1, children=['g87gnx5']&gt;, &lt;MoreComments count=1, children=['g87u15i']&gt;, &lt;MoreComments count=1, children=['g87jhuj']&gt;, &lt;MoreComments count=1, children=['g87wmzv']&gt;, &lt;MoreComments count=1, children=['g875ryb']&gt;, &lt;MoreComments count=1, children=['g87jnpo']&gt;, &lt;MoreComments count=1, children=['g86pl6b']&gt;, &lt;MoreComments count=1, children=['g87a5bk']&gt;, &lt;MoreComments count=1, children=['g86t5fr']&gt;, &lt;MoreComments count=1, children=['g88b1v8']&gt;, &lt;MoreComments count=1, children=['g87kqr0']&gt;, &lt;MoreComments count=1, children=['g8aa339']&gt;, &lt;MoreComments count=1, children=['g86r39d']&gt;, &lt;MoreComments count=1, children=['g89g68w']&gt;, &lt;MoreComments count=1, children=['g86p7hq']&gt;, &lt;MoreComments count=1, children=['g881vl7']&gt;, &lt;MoreComments count=1, children=['g88i16j']&gt;, &lt;MoreComments count=1, children=['g8a1lbd']&gt;, &lt;MoreComments count=1, children=['g88hgq4']&gt;, &lt;MoreComments count=1, children=['g88ukf7']&gt;, &lt;MoreComments count=1, children=['g87eizr']&gt;, &lt;MoreComments count=1, children=['g87itku']&gt;, &lt;MoreComments count=1, children=['g88485u']&gt;, &lt;MoreComments count=1, children=['g87k178']&gt;, &lt;MoreComments count=1, children=['g881pf9']&gt;, &lt;MoreComments count=1, children=['g86u0y6']&gt;, &lt;MoreComments count=1, children=['g88wwdf']&gt;, &lt;MoreComments count=1, children=['g86odkd']&gt;, &lt;MoreComments count=1, children=['g88y2nq']&gt;, &lt;MoreComments count=1, children=['g87xzn3']&gt;, &lt;MoreComments count=1, children=['g87xclj']&gt;, &lt;MoreComments count=1, children=['g880q35']&gt;, &lt;MoreComments count=1, children=['g88rs81']&gt;, &lt;MoreComments count=1, children=['g883f06']&gt;, &lt;MoreComments count=1, children=['g88xnri']&gt;, &lt;MoreComments count=1, children=['g86qy7i']&gt;, &lt;MoreComments count=1, children=['g88j9de']&gt;, &lt;MoreComments count=1, children=['g87diha']&gt;, &lt;MoreComments count=1, children=['g87ee9l']&gt;, &lt;MoreComments count=1, children=['g86p0yh']&gt;, &lt;MoreComments count=1, children=['g87fesb']&gt;, &lt;MoreComments count=1, children=['g87yg5m']&gt;, &lt;MoreComments count=1, children=['g874k32']&gt;, &lt;MoreComments count=1, children=['g88qa51']&gt;, &lt;MoreComments count=1, children=['g89fx4d']&gt;, &lt;MoreComments count=1, children=['g88hrnr']&gt;, &lt;MoreComments count=1, children=['g8849qs']&gt;, &lt;MoreComments count=0, children=[]&gt;, &lt;MoreComments count=0, children=[]&gt;]\n\nfor top_level_comment in submission.comments:\n    corpus.append(top_level_comment.body)\n\nvectorizer=CountVectorizer()\nXs = vectorizer.fit_transform(corpus)\n\ncol_names=vectorizer.get_feature_names_out()\n\nThe overall sentiment from this brief analysis is a positive one, but the search terms need to be more specific to get any useful information out of this process.\n\nfrom nltk.sentiment import SentimentIntensityAnalyzer\n\noverall = []\nsia = SentimentIntensityAnalyzer()\n\nfor text in corpus:\n  score=sia.polarity_scores(text)\n  overall.append(score['compound'])\n\n\n\nsum(overall)/len(overall)\n\n0.03216993006993008\n\n\n\nsave(fourth_decisions, fourth_downs, file = \"clean_data.Rdata\")"
  }
]