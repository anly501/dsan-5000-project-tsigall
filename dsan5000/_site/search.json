[
  {
    "objectID": "naive_bayes.html",
    "href": "naive_bayes.html",
    "title": "Naïve Bayes",
    "section": "",
    "text": "Naïve Bayes methods are a set of supervised learning algorithms based on combining Bayes’ theorem with the assumption that the features used in the classification algorithm are conditionally independent. This is the naïve assumption. Essentially, it assumes that the presence of one feature does not affect the presence of the other features. The other component of these methods are that they are based on Bayes’ theorem which describes the probability of an event based on prior knowledge of that event. This probability is constantly updating, and is represented in the formula in this case as \\[P(y|x_1,...,x_n) = \\frac{(P(y)P(x_1,...x_n|y)}{P(x_1,...,x_n)}\\]\nPutting this in the context of a classification problem, we want to determine the likelihood that an event belongs to class \\(y\\) given the features we select from the data, those being \\(x_1,...x_n\\). To do this, labelled training data is needed. Each algorithm will estimate prior probabilities \\(P(y)\\) for each class and likelihood probabilities for each feature \\(P(x_1,...x_n|y)\\) from this training data. Then, a posterior probability for each class \\(P(y|x_1,...x_n)\\) is calculated and the highest probability is determined to be the class for the data.\nThere are several types of Naïve Bayes algorithms, those being Gaussian, Multinomial, and Bernoulli Naïve Bayes. Gaussian is used when continuous, normally distributed data is obtained. In this case, the likelihood of features is assumed to be normally distributed. \\(\\sigma_y\\) and \\(\\mu_y\\) are estimated using maximum likelihood as in the steps outlined above. Multinomial is used for multinomially distributed data and commonly used in text classification with data in the form of vectors representing word counts. \\(\\theta_y\\) is estimated in this case where \\(\\theta_{yi}\\) is the probability \\(P(x_i|y)\\) of feature \\(i\\) appearing in a sample of class \\(y\\). Finally, Bernoulli is used when there are multiple features but each one is binary.\nIn this case we will be using Gaussian Naïve Bayes, as we have continuous data that we would like to predict."
  },
  {
    "objectID": "data_cleaning2.html",
    "href": "data_cleaning2.html",
    "title": "Text Data",
    "section": "",
    "text": "Sentiment Analysis\nThe NFL subreddit is a useful place to extract text data produced by fans and their reaction to these essential decisions. Like most jobs, the goal of an NFL head coach is not only to win games, but to keep their bosses happy. The size and outspoken nature of NFL fan bases can be a factor in the job security of these coaches, as if a coach loses the fans, their job gets a lot harder. This is where sentiment analysis comes in, as getting an idea of how fans feel about 4th down decisions by certain coaches may give us insights into how they are making their decisions, and whether or not the fans have any influence on the decision making process.\nThis allows us to get posts from the NFL subreddit using a search query of “4th down” and access the comments of those posts.\n\nsubreddit = reddit.subreddit(\"nfl\")\nquery = \"4th down\"\n\ntop_posts = subreddit.search(query, limit=100)\nurls = []\ncorpus = []\n\nfor post in top_posts:\n    urls.append(post.permalink)\n    \nurl = \"https://www.reddit.com\" + urls[0]\n\nsubmission = reddit.submission(url=url)\n\nsubmission.comments.replace_more(limit=0)\n\n[]\n\nfor top_level_comment in submission.comments:\n    corpus.append(top_level_comment.body)\nurls\n\n['/r/nfl/comments/1738fiy/highlight_tj_watt_calls_ballgame_with_a_4th_down/', '/r/nfl/comments/j7rtos/highlight_brady_gets_confused_thought_4th_down/', '/r/nfl/comments/rlv1ew/highlight_rams_get_away_with_pass_interference_on/', '/r/nfl/comments/yudyr5/highlight_okwara_sacks_fields_on_4th_down/', '/r/nfl/comments/yyar3n/highlight_packers_stuffed_on_4th_down_and_have/', '/r/nfl/comments/uorvep/highlight_josh_allen_27_yard_td_pass_on_4th_down/', '/r/nfl/comments/10ohcjv/highlight_devonta_smith_makes_an_incredible_one/', '/r/nfl/comments/qf4n13/highlight_matt_judon_with_a_hard_tackle_on_4th/', '/r/nfl/comments/10cagft/highlight_pedersons_gutsy_4th_down_call_plays_off/', '/r/nfl/comments/1003l0d/highlight_5_years_ago_today_deshone_kizers_4th/', '/r/nfl/comments/ss02sw/highlight_sb_lvi_lar_vs_cin_rams_defense_stops/', '/r/nfl/comments/7vb4c0/highlight_trey_burton_pass_to_nick_foles_for_the/', '/r/nfl/comments/qjwvle/highlight_justin_fields_changes_field_on_4th_down/', '/r/nfl/comments/106996p/highlight_jaguars_get_the_stop_on_4th_down_and/', '/r/nfl/comments/tomh57/highlight_julio_jones_drops_a_wide_open_td_catch/', '/r/nfl/comments/77jmol/highlight_romo_calls_4th_down_call_cbs/', '/r/nfl/comments/yyaoba/highlight_ugly_4th_down_attempt_by_gb/', '/r/nfl/comments/u74w01/highlight_the_chiefs_fail_to_find_the_endzone_on/', '/r/nfl/comments/y0uplq/highlight_carr_finds_adams_for_the_touch_on_4th/', '/r/nfl/comments/7zfdm2/doug_pederson_went_for_it_on_4th_down_29_times/', '/r/nfl/comments/a4oocn/highlight_mahomes_rolls_out_and_finds_tyreek_hill/', '/r/nfl/comments/r9pkdh/highlight_on_the_game_defining_4th_down_jared/', '/r/nfl/comments/qjw6bn/highlight_for_the_second_time_this_season_goff/', '/r/nfl/comments/j9jdsw/highlight_min_vs_sea_wilson_td_pass_to_metcalf_on/', '/r/nfl/comments/179ne86/highlight_chargers_stopped_on_4th_down_in_redzone/', '/r/nfl/comments/afd5br/highlight_unsportsmanlike_conduct_penalty_on_the/', '/r/nfl/comments/pcw9p5/highlight_browns_coleman_drops_the_ball_on_4th/', '/r/nfl/comments/110wpck/highlight_dallas_godert_with_a_top_class_catch_to/', '/r/nfl/comments/xntaaj/highlight_sun_god_for_thirty_yards_on_4th_down/', '/r/nfl/comments/d0avcg/highlight_the_chicago_crowd_booong_their_team/', '/r/nfl/comments/10cvybe/highlight_kaiir_elam_knocks_away_the_4th_down_pass/', '/r/nfl/comments/y0yc8h/highlight_carr_throws_to_nowhere_on_4th_down_and/', '/r/nfl/comments/z0df3r/highlight_nothing_cooking_for_the_eagles_on_4th/', '/r/nfl/comments/173cewt/highlight_reddick_with_the_huge_4th_down_sack/', '/r/nfl/comments/z7j2ql/highlight_colts_cant_convert_the_4th_down_and_the/', '/r/nfl/comments/16depvu/pff_aidan_hutchinson_vs_the_chiefs_7_pressures/', '/r/nfl/comments/xzpqtc/highlight_giants_stop_packers_on_4th_down/', '/r/nfl/comments/zulabw/highlight_minshew_finds_smith_on_4th_down_for_an/', '/r/nfl/comments/179ml98/highlight_cowboys_stuffed_on_4th_down/', '/r/nfl/comments/uouon1/highlight_4_minutes_of_justin_herbert_converting/', '/r/nfl/comments/10dzun3/highlight_cowboys_go_for_it_on_4th_down_and_dak/', '/r/nfl/comments/zumoyv/highlight_the_cowboys_defense_stifles_the_eagles/', '/r/nfl/comments/jpryj7/highlight_rodgers_to_davante_4th_down_conversion/', '/r/nfl/comments/y5ulhj/highlight_the_avatar_makes_another_victim_murray/', '/r/nfl/comments/enfqxi/highlight_expletives_during_the_delay_of_game_on/', '/r/nfl/comments/10iwne3/highlight_mcdermott_decides_not_to_kick_the_field/', '/r/nfl/comments/11dh2bg/highlight_belichicks_4th_down_gamble_deep_in_pats/', '/r/nfl/comments/16l7e16/highlight_herbert_finds_allen_for_the_4th_down/', '/r/nfl/comments/sb667m/highlight_eric_weddle_called_for_personal_foul/', '/r/nfl/comments/100uowl/highlight_darnell_savage_picksixes_cousins_on_4th/', '/r/nfl/comments/jt9nh4/espn_the_colts_have_already_gone_for_it_on_4th/', '/r/nfl/comments/wngyxs/kyler_murrays_playcalling_debut_in_4th_q_doesnt/', '/r/nfl/comments/k85e0s/highlight_the_giants_stop_the_seahawks_on_4th/', '/r/nfl/comments/v0z4tk/highlight_antonio_brown_makes_clutch_touchdown/', '/r/nfl/comments/qcg8ax/russell_per_stathead_sean_mcdermott_became_the/', '/r/nfl/comments/e4l1lz/highlight_jimmy_g_finds_deebo_on_4th_down_for_the/', '/r/nfl/comments/s0jr3u/pff_justin_herbert_on_4th_down_vs_the_raiders_66/', '/r/nfl/comments/e5b6eq/highlight_seahawks_fake_a_punt_on_4th_down_and/', '/r/nfl/comments/l008i6/jones_andy_reid_is_asked_by_adamteicher_when_did/', '/r/nfl/comments/176lygi/highlight_reid_sacks_wilson_on_4th_down/', '/r/nfl/comments/xzutf5/highlight_chargers_go_for_it_on_4th_down_and_fail/', '/r/nfl/comments/10onvq3/highlight_mahomes_hits_kelce_in_the_endzone_on/', '/r/nfl/comments/yo2tml/highlight_sauce_gardner_deflects_the_josh_allen/', '/r/nfl/comments/a6m8qm/highlight_jabrill_pepper_sacks_keenum_on_4th_down/', '/r/nfl/comments/yuk9wo/highlight_pressure_gets_to_dak_and_cowboys_fail/', '/r/nfl/comments/16l8v7c/highlight_josh_allen_to_gabe_davis_on_4th_down/', '/r/nfl/comments/reyeoa/highlight_denzel_ward_provides_the_4thdown_stop/', '/r/nfl/comments/y0ygi5/sharp_image_of_adams_and_renfrow_colliding_on_the/', '/r/nfl/comments/dhi807/49ers_defense_held_the_rams_to_013_on_3rd_and_4th/', '/r/nfl/comments/xzs5t5/highlight_matthew_judon_strip_sacks_goff_on_4th/', '/r/nfl/comments/y3hxva/highlight_bears_cannot_convert_on_4th_down/', '/r/nfl/comments/adbyxx/highlight_phi_vs_chi_foles_to_golden_tate_td_pass/', '/r/nfl/comments/xu3v8i/fox_sports_nfl_boos_coming_down_from_panthers/', '/r/nfl/comments/10j1qcz/burke_espn_4th_recommendation_chart_on_dallas_4th/', '/r/nfl/comments/2rjv59/adam_schefter_on_twitter_nfl_admitted_to_lions/', '/r/nfl/comments/jb8a5i/game_on_wisconsin_whose_quarterback_is_better/', '/r/nfl/comments/ja5vo1/highlight_marshon_lattimore_stops_mike_williams/', '/r/nfl/comments/yu7l4j/highlight_geno_with_a_hell_of_a_touchdown_to/', '/r/nfl/comments/11n5z1m/throwback_watch_the_longest_4thdown_conversions/', '/r/nfl/comments/178n83z/highlight_bengals_get_geno_down_with_a_sack_on/', '/r/nfl/comments/xo0iib/highlight_robinson_with_the_big_run_for_the_td_on/', '/r/nfl/comments/qa59oa/highlight_chargers_go_for_it_on_4th_down_while_at/', '/r/nfl/comments/wpl6t1/chargers_hc_brandon_staleys_yes_unless_system_for/', '/r/nfl/comments/3s51uy/aaron_rodgers_on_the_4thdown_play_i_got_scared_by/', '/r/nfl/comments/uaewt7/pff_best_on_3rd_and_4th_down_aaron_rodgers_925/', '/r/nfl/comments/j9b8kd/highlight_what_is_that_jaguars_attempt_the/', '/r/nfl/comments/k2nkno/oc_highlight_andy_dalton_is_100_in_his_career_on/', '/r/nfl/comments/yifduj/forder_tua_on_3rd_and_4th_down_is_on_a_completely/', '/r/nfl/comments/xzt9ct/highlight_lions_stuffed_on_4th_down_for_third_time/', '/r/nfl/comments/rzygwj/dov_kleiman_already_today_bears_failed_on_4th/', '/r/nfl/comments/q9q1q6/pff_justin_herbert_on_3rd4th_down_this_season_924/', '/r/nfl/comments/wn1cnz/highlight_desmond_ridder_avoids_the_pressure_and/', '/r/nfl/comments/uib1c4/los_angeles_rams_may_the_4th_down_stop_be_with_you/', '/r/nfl/comments/prmudl/ben_baldwins_4th_down_bot_the_final_4th_down_of/', '/r/nfl/comments/ixem9n/highlight_raiders_score_a_td_on_4th_down_take_the/', '/r/nfl/comments/a8xw1v/highlight_julian_edelman_converts_on_4th_down_and/', '/r/nfl/comments/s09r06/highlight_chargers_go_for_it_on_4th_down_at_their/', '/r/nfl/comments/dkr5be/highlight_ravens_qb_lamar_jackson_runs_it_in/', '/r/nfl/comments/10cw1jy/field_yates_whats_crazy_about_that_4th_down_delay/', '/r/nfl/comments/9mfssf/rams_convinced_sean_mcvay_to_go_for_it_on_4th_down/']\n\n\nThe overall sentiment from this brief analysis is a positive one, but the search terms need to be more specific to get any useful information out of this process.\n\nfrom nltk.sentiment import SentimentIntensityAnalyzer\n\noverall = []\nsia = SentimentIntensityAnalyzer()\n\nfor text in corpus:\n  score=sia.polarity_scores(text)\n  print(text)\n  print(score)\n  overall.append(score['compound'])\n\nTJ Watt- singlehandedly keeping Matt Canada employed\n{'neg': 0.0, 'neu': 1.0, 'pos': 0.0, 'compound': 0.0}\n17-10 perfectly normal game.\n{'neg': 0.0, 'neu': 0.417, 'pos': 0.583, 'compound': 0.6369}\nTrue sickos game\n{'neg': 0.0, 'neu': 0.417, 'pos': 0.583, 'compound': 0.4215}\nWhen a play is needed most, TJ Watt will make that play.\n{'neg': 0.0, 'neu': 0.652, 'pos': 0.348, 'compound': 0.5859}\nGot flagged for unsportsmanlike lol\n{'neg': 0.0, 'neu': 0.588, 'pos': 0.412, 'compound': 0.4215}\nAFC is wild\n{'neg': 0.0, 'neu': 1.0, 'pos': 0.0, 'compound': 0.0}\nHe is a fucking wrecking ball\n{'neg': 0.0, 'neu': 1.0, 'pos': 0.0, 'compound': 0.0}\nWorth it for tj to get his second sack of the game\n{'neg': 0.0, 'neu': 0.853, 'pos': 0.147, 'compound': 0.2263}\nI love our defense\n{'neg': 0.0, 'neu': 0.149, 'pos': 0.851, 'compound': 0.6908}\nYea but he wasnt double teamed so does it really count?\n{'neg': 0.0, 'neu': 1.0, 'pos': 0.0, 'compound': 0.0}\nBest defensive player in the league\n{'neg': 0.0, 'neu': 0.43, 'pos': 0.57, 'compound': 0.6486}\nDPOY\n{'neg': 0.0, 'neu': 1.0, 'pos': 0.0, 'compound': 0.0}\nPFF says he was the lowest rated player in the game, probably\n{'neg': 0.191, 'neu': 0.809, 'pos': 0.0, 'compound': -0.3818}\nThis is the worst BEST game I have ever watched. What the fuck are both teams doing?\n\nInsanity. As a 49ers fan who saw Watt eat my RT live..I am so happy we played them week 1 man.\n{'neg': 0.209, 'neu': 0.519, 'pos': 0.271, 'compound': 0.5168}\nBias aside, I really don’t know if their is a more valuable player to their team than TJ Watt. It is staggering how many games they’ve won off his back. And if its not him its Highsmith ,Fitzpatrick or Heyward.\n{'neg': 0.032, 'neu': 0.805, 'pos': 0.163, 'compound': 0.7713}\nAn AFC North game without at least 3 deaths is considered a dull affair.\n{'neg': 0.197, 'neu': 0.803, 'pos': 0.0, 'compound': -0.4019}\nHEY TOM….\n{'neg': 0.0, 'neu': 1.0, 'pos': 0.0, 'compound': 0.0}\nI’m so sad that we’re going to waste one of this generations best past rushers by not having a competent offense.\n{'neg': 0.28, 'neu': 0.516, 'pos': 0.204, 'compound': -0.2993}\nKeep writing that MVP resume\n{'neg': 0.0, 'neu': 1.0, 'pos': 0.0, 'compound': 0.0}\nI love playing the ravens with LJ lol\n{'neg': 0.0, 'neu': 0.312, 'pos': 0.688, 'compound': 0.8316}\nBest Defender in the NFL.\n{'neg': 0.0, 'neu': 0.349, 'pos': 0.651, 'compound': 0.6808}\nThat ending was hilarious\n{'neg': 0.0, 'neu': 0.526, 'pos': 0.474, 'compound': 0.4019}\nHere I come to save the day\n{'neg': 0.0, 'neu': 0.61, 'pos': 0.39, 'compound': 0.4939}\nMan this guy is fucking fun to watch. Between this and the safety that changed momentum he really won the game.\n{'neg': 0.0, 'neu': 0.634, 'pos': 0.366, 'compound': 0.8856}\nBut does he really disrupt the game?\n{'neg': 0.0, 'neu': 1.0, 'pos': 0.0, 'compound': 0.0}\nI just want to juxtapose TJ Watt taking his helmet off to Sneed's in the chiefs game. Neither affected the outcome of the game. Both were on change of possessions. One was flagged and one wasn't.\n{'neg': 0.0, 'neu': 0.923, 'pos': 0.077, 'compound': 0.1887}\nwhat a monster\n{'neg': 0.0, 'neu': 1.0, 'pos': 0.0, 'compound': 0.0}\nDPOY X2\n{'neg': 0.0, 'neu': 1.0, 'pos': 0.0, 'compound': 0.0}\nAs a Browns fan this game just confirmed two things\n\nTJ Watt is the Pittsburgh steelers. We saw this last year\n\nThe ravens can never have a good wr core\n{'neg': 0.078, 'neu': 0.847, 'pos': 0.075, 'compound': -0.0274}\nIirc no matter how sucked Steelers are they always own the Ravens and Browns every fucking single year\n{'neg': 0.244, 'neu': 0.704, 'pos': 0.052, 'compound': -0.6249}\nTJ Watt is by far our best player. It’s not even close. If we were a better team he would be in talks for DPOY this year. I fucking love this man. The only jersey I’ve ever bought\n{'neg': 0.0, 'neu': 0.74, 'pos': 0.26, 'compound': 0.9117}\nAs a bengals fan, I hate the dude. But I’m not even gonna lie I think he’s better than Garrett and Donald.\n{'neg': 0.099, 'neu': 0.671, 'pos': 0.231, 'compound': 0.4854}\nTJ Watt&gt;Parsons\n{'neg': 0.0, 'neu': 1.0, 'pos': 0.0, 'compound': 0.0}\nIt ain't even a rivalry now, they just have our fucking number and Lamar and the shit for hands crew has no answer for it.\n\nI don't see this team making a step forward until they get the pitt monkey off our back\n{'neg': 0.049, 'neu': 0.826, 'pos': 0.125, 'compound': 0.5256}\nDPOY x2\n{'neg': 0.0, 'neu': 1.0, 'pos': 0.0, 'compound': 0.0}\nHonest question here and as someone who didn’t watch the Texans often. Is TJ bette than JJ?\n{'neg': 0.0, 'neu': 0.713, 'pos': 0.287, 'compound': 0.7213}\nThat’s my franchise QB.\n{'neg': 0.0, 'neu': 1.0, 'pos': 0.0, 'compound': 0.0}\nTJ Watt, the 32nd best edge rusher in the league  according to some people on here. I love this man.\n{'neg': 0.0, 'neu': 0.669, 'pos': 0.331, 'compound': 0.8555}\nI don’t think I’ll live past 35, my heart can’t take this lmao BUT I LOVE IT\n{'neg': 0.0, 'neu': 0.572, 'pos': 0.428, 'compound': 0.8936}\nTJ Watt is a fucking machine this year. He’s basically doing what Bosa was doing last year. OC’s better plan around this man lol.\n{'neg': 0.0, 'neu': 0.787, 'pos': 0.213, 'compound': 0.6908}\nCan't wait to see his 60.5 rating from PFF.\n{'neg': 0.0, 'neu': 1.0, 'pos': 0.0, 'compound': 0.0}\nHe should be a candidate for MVP\n{'neg': 0.0, 'neu': 1.0, 'pos': 0.0, 'compound': 0.0}\nTj is dpoy so far and it’s not close\n{'neg': 0.0, 'neu': 1.0, 'pos': 0.0, 'compound': 0.0}\nSteeler's defense is the best in the league. Only reason they've won games this season.\n{'neg': 0.0, 'neu': 0.561, 'pos': 0.439, 'compound': 0.8555}\nWatt like a hot knife through butter.\n{'neg': 0.0, 'neu': 0.667, 'pos': 0.333, 'compound': 0.3612}\nBut ya know Micha Parsons already won DPOY after week 2 so no discussions of that.\n{'neg': 0.174, 'neu': 0.595, 'pos': 0.231, 'compound': 0.3073}\nThe fact that TJ Watt is +350 DPOY and Micah is +190 is proof that it is just a popularity contest.\n{'neg': 0.0, 'neu': 0.86, 'pos': 0.14, 'compound': 0.4767}\nWhen he ripped his helmet off I actually got scared and shit my pants\n{'neg': 0.371, 'neu': 0.629, 'pos': 0.0, 'compound': -0.7579}\nHow can you argue against this man being DPOTY?\n{'neg': 0.231, 'neu': 0.769, 'pos': 0.0, 'compound': -0.34}\nHe isn’t on my favorite and I’d still die for this man.\n{'neg': 0.231, 'neu': 0.592, 'pos': 0.178, 'compound': -0.2263}\nWas he called for a penalty for taking off his helmet on the field of play? Asking for Panther’s fans.\n{'neg': 0.134, 'neu': 0.759, 'pos': 0.107, 'compound': -0.1531}\nMan NFL feels wild this year. A few terrible teams, a few great teams, and then like 20 teams that are just going to ruin each other's day.\n{'neg': 0.194, 'neu': 0.62, 'pos': 0.186, 'compound': -0.0772}\nThis announcer calling it like it’s 2nd down in the first quarter.\n{'neg': 0.0, 'neu': 0.815, 'pos': 0.185, 'compound': 0.3612}\nHe’s gonna get another D MVP thisnyear\n{'neg': 0.0, 'neu': 1.0, 'pos': 0.0, 'compound': 0.0}\nI'll never forgive us for not drafting him\n{'neg': 0.206, 'neu': 0.794, 'pos': 0.0, 'compound': -0.2057}\nLamar moment. Homie is an inch tall in big moments. At least he run good for fantasy stats\n{'neg': 0.0, 'neu': 0.854, 'pos': 0.146, 'compound': 0.4404}\nAnd unlike Dwayne Rudd he waited until after the play was over, so that the penalty wouldn't give the offense another chance.\n{'neg': 0.119, 'neu': 0.657, 'pos': 0.224, 'compound': 0.2207}\nHe's trying to set a record for fastest player to lock up DPOY in a season.\n{'neg': 0.0, 'neu': 1.0, 'pos': 0.0, 'compound': 0.0}\nWas Watt flagged for removing his helmet while on the field?\n{'neg': 0.0, 'neu': 1.0, 'pos': 0.0, 'compound': 0.0}\nPFF will say he didn’t make an impact this week\n{'neg': 0.0, 'neu': 1.0, 'pos': 0.0, 'compound': 0.0}\nA win is a win but honestly am I jaded in that I don’t think we are that good. Defense sure but our offense is just not enough\n{'neg': 0.15, 'neu': 0.408, 'pos': 0.442, 'compound': 0.8873}\nTj watt is something else, for real\n{'neg': 0.0, 'neu': 1.0, 'pos': 0.0, 'compound': 0.0}\nMost normal Steelers Ravens game\n{'neg': 0.0, 'neu': 1.0, 'pos': 0.0, 'compound': 0.0}\nWhy did the refs throw a flag for TJ there?\n{'neg': 0.0, 'neu': 1.0, 'pos': 0.0, 'compound': 0.0}\nThe steelers have pleasantly surprised me this season. Taking out the ravens and the browns has been great\n{'neg': 0.0, 'neu': 0.622, 'pos': 0.378, 'compound': 0.8442}\nAs a Steelers fan, I still expect a record around.500, but they’ve already delivered two wins that crushed the souls of a division rival.  That is something to savor.\n{'neg': 0.114, 'neu': 0.679, 'pos': 0.207, 'compound': 0.4588}\nDid he get a penalty for removing his helmet on the field of play?\n{'neg': 0.183, 'neu': 0.671, 'pos': 0.146, 'compound': -0.1531}\nEvery game these teams play is so fucking gritty. Truly the best rivalry in the nfl and it’s not close.\n{'neg': 0.0, 'neu': 0.629, 'pos': 0.371, 'compound': 0.8762}\nGame changer\n{'neg': 0.0, 'neu': 1.0, 'pos': 0.0, 'compound': 0.0}\nBosa, Parsons or Watt.  Can't go wrong choosing either one as an edge rusher.\n{'neg': 0.0, 'neu': 0.836, 'pos': 0.164, 'compound': 0.3724}\nFortunately for Harbaugh, i also watched the Miami-GT game this weekend so this was not worst coaching performance i saw in the last two days.\n{'neg': 0.0, 'neu': 0.87, 'pos': 0.13, 'compound': 0.5096}\ndid he get a penalty for taking his helmet off?\n{'neg': 0.273, 'neu': 0.727, 'pos': 0.0, 'compound': -0.4588}\nu/savevideobot\n{'neg': 0.0, 'neu': 1.0, 'pos': 0.0, 'compound': 0.0}\nI’m so over Lamar at this point, he just can’t be trusted to put this team on his back. Also has yet to have a big against the Steelers, which imo is just sad at this point in this career\n{'neg': 0.072, 'neu': 0.856, 'pos': 0.072, 'compound': 0.0}\nwhat the hell was that awful attempt at a chip block lol\n{'neg': 0.517, 'neu': 0.345, 'pos': 0.138, 'compound': -0.8271}\nThe standard is the standard\n{'neg': 0.0, 'neu': 1.0, 'pos': 0.0, 'compound': 0.0}\nImagine watching JJ Watt years ago and some dude leans over and is like \"His younger brother is gonna be better.\"\n\nInsane.\n{'neg': 0.1, 'neu': 0.705, 'pos': 0.194, 'compound': 0.368}\nI am curious when the Ravens will decide when its time to part ways with their passing running back\n{'neg': 0.0, 'neu': 0.881, 'pos': 0.119, 'compound': 0.3182}\nprobably the worst title I've seen in my life OP\n{'neg': 0.313, 'neu': 0.687, 'pos': 0.0, 'compound': -0.6249}\nIsn't taking off your helmet on the field a penalty?\n{'neg': 0.273, 'neu': 0.727, 'pos': 0.0, 'compound': -0.4588}\nHow did he not get flagged for taking off his helmet?\n{'neg': 0.0, 'neu': 1.0, 'pos': 0.0, 'compound': 0.0}\nRavens have the worst luck ISTG\n{'neg': 0.369, 'neu': 0.36, 'pos': 0.27, 'compound': -0.2732}\nwhen are you allowed to take your helmet off without drawing a PF? I'm not a rule expert...\n{'neg': 0.0, 'neu': 1.0, 'pos': 0.0, 'compound': 0.0}\nShould be flag\n{'neg': 0.0, 'neu': 1.0, 'pos': 0.0, 'compound': 0.0}\nHe’s gotta be on the juice right??\n{'neg': 0.0, 'neu': 1.0, 'pos': 0.0, 'compound': 0.0}\nI saw the box so I checked the highlights, I was baffled the entire time how it gets to 17-10. Even with 2 minutes left in the game I was baffled\n{'neg': 0.0, 'neu': 1.0, 'pos': 0.0, 'compound': 0.0}\nO man did he get a penalty for taking his helmet off. 😂\n{'neg': 0.25, 'neu': 0.75, 'pos': 0.0, 'compound': -0.4588}\nWhat an animal\n{'neg': 0.0, 'neu': 1.0, 'pos': 0.0, 'compound': 0.0}\nSick as fuck\n{'neg': 0.872, 'neu': 0.128, 'pos': 0.0, 'compound': -0.7783}\nHe's an animal !\n{'neg': 0.0, 'neu': 1.0, 'pos': 0.0, 'compound': 0.0}\nGood game\n{'neg': 0.0, 'neu': 0.256, 'pos': 0.744, 'compound': 0.4404}\nI wish this guy was on the Falcons.\n{'neg': 0.0, 'neu': 0.69, 'pos': 0.31, 'compound': 0.4019}\nDid Jackson think it was 3rd down?\n{'neg': 0.0, 'neu': 1.0, 'pos': 0.0, 'compound': 0.0}\nSo... the helmet coming off for the celebration is an unsportsmanlike, right? That rule is still a thing, or am I crazy?\n{'neg': 0.127, 'neu': 0.873, 'pos': 0.0, 'compound': -0.4137}\nTook his helmet off. Shades of Dwayne Rudd.\n{'neg': 0.0, 'neu': 1.0, 'pos': 0.0, 'compound': 0.0}\nI want to learn the game\n{'neg': 0.0, 'neu': 0.755, 'pos': 0.245, 'compound': 0.0772}\n\ncorpus[1]\n\n'17-10 perfectly normal game.'"
  },
  {
    "objectID": "effect_on_coach_success.html",
    "href": "effect_on_coach_success.html",
    "title": "Effect on Coach Success",
    "section": "",
    "text": "As we saw in the last step of our EDA, coaches are consistently far too conservative when it comes to fourth down decisions. We are trying to figure out why this may be the case. Two possible reasons immediately come to mind:\n\n4th down decisions have less effect on the outcome of games than we think.\nCoaches who are more conservative will keep their jobs longer, as being aggressive (and failing) on fourth down could be generally frowned upon by the NFL community.\n\n\nAll 4th Downs\nLets explore the first reason. One simple measure of coach success season by season is winning percentage. To take a quick look this, we can look at how correct decision rate on 4th down compares to the winning percentage a coach had in that particular season. Alongside this process we will also look at the average EPA per play on 4th downs coaches had in go-for-it situations that season. EPA is a measure of success that stands for “Estimated Points Added” and it measures the estimated points a play will add to the total final score at the end of the game.\n\n\n\n\n\ncoach\nteam\nseason\ncorrect_rate\npct\nepa\n\n\n\n\nAdam Gase\nMIA\n2016\n0.075\n0.625\n-0.278\n\n\nAdam Gase\nMIA\n2017\n0.375\n0.375\n-0.133\n\n\nAdam Gase\nMIA\n2018\n0.211\n0.438\n-0.021\n\n\nAdam Gase\nNYJ\n2019\n0.340\n0.438\n-0.171\n\n\nAdam Gase\nNYJ\n2020\n0.237\n0.125\n-0.382\n\n\nAndy Reid\nKC\n2016\n0.269\n0.750\n0.230\n\n\nAndy Reid\nKC\n2017\n0.170\n0.625\n0.096\n\n\nAndy Reid\nKC\n2018\n0.422\n0.750\n0.353\n\n\nAndy Reid\nKC\n2019\n0.286\n0.750\n0.021\n\n\nAndy Reid\nKC\n2020\n0.360\n0.875\n0.097\n\n\n\n\n\n\n\nNow we have the winning percentage and epa alongside the correct decision rate on fourth down for every coach by season. Let’s take a closer look at this table and add averages for winning percentage, correct decision rate, and epa.\n\n\n\n\n\ncoach\nteam\nseason\ncorrect_rate\npct\nepa\nz_wins\nz_correct\nz_epa\nabove_mean_wins\nabove_mean_correct\nabove_mean_epa\n\n\n\n\nAdam Gase\nMIA\n2016\n0.075\n0.625\n-0.278\n0.657\n-2.428\n-1.450\n1\n0\n0\n\n\nAdam Gase\nMIA\n2017\n0.375\n0.375\n-0.133\n-0.653\n0.567\n-0.613\n0\n1\n0\n\n\nAdam Gase\nMIA\n2018\n0.211\n0.438\n-0.021\n-0.326\n-1.075\n0.032\n0\n0\n1\n\n\nAdam Gase\nNYJ\n2019\n0.340\n0.438\n-0.171\n-0.326\n0.218\n-0.837\n0\n1\n0\n\n\nAdam Gase\nNYJ\n2020\n0.237\n0.125\n-0.382\n-1.963\n-0.808\n-2.054\n0\n0\n0\n\n\nAndy Reid\nKC\n2016\n0.269\n0.750\n0.230\n1.312\n-0.489\n1.482\n1\n0\n1\n\n\nAndy Reid\nKC\n2017\n0.170\n0.625\n0.096\n0.657\n-1.481\n0.705\n1\n0\n1\n\n\nAndy Reid\nKC\n2018\n0.422\n0.750\n0.353\n1.312\n1.039\n2.189\n1\n1\n1\n\n\nAndy Reid\nKC\n2019\n0.286\n0.750\n0.021\n1.312\n-0.324\n0.274\n1\n0\n1\n\n\nAndy Reid\nKC\n2020\n0.360\n0.875\n0.097\n1.967\n0.417\n0.710\n1\n1\n1\n\n\n\n\n\n\n\nNow we can cross tabulate effectively.\n\n\n\n\n\n\n\n\n\n\n\nIt looks as if decision rate on 4th down has little effect on the win rate of coaches, which makes sense as when looking at plays across an entire game, 4th down plays make up a small percentage of those plays. It would be worth looking at how influential 4th down plays are on the result of each game compared to other types of plays, though.\nHaving a good correct 4th down decision does seem to have more of an effect on EPA, however. This makes sense as EPA in this case is estimated points added on 4th down, meaning this metric is directly measuring success on 4th down only, rather than success across an entire game. It is not surprising that having a good correct 4th down decision rate would lead to a more positive 4th down success metric than a whole game success metric.\nIt is an encouraging sign to see that making “correct” decisions on 4th down leads to more points on those 4th down plays. This means it would be useful to explore how 4th down plays contribute to a team’s final score compared to plays on other downs. This may give us a better idea as to how these 4th down decisions affect the success of coaches across the entire game, rather than simply on 4th down.\n\n\nHigh-Leverage Scenarios\nLet’s go back to our discussion involving high-leverage scenarios. What would happen if we did the same cross tabulation as above but only including high-leverage scenarios? In theory, this would give tell us more about a coaches success because these situations are single plays in which games are won and lost.\nHere are the first few rows of the dataset showing high-leverage situations we were looking at earlier. This time though it is a larger dataset because I chose to remove the condition that wp_succeed &gt; 0.95 as that limited us too much. Now the definition for a “high-leverage scenario” is one in which the difference in win probability between failing and succeeding in a 4th down attempt is 10%. This way we have 3,676 4th down situations to look at instead of only 113.\n\n\n\n\n\nseason\ncoach\nposteam\ndefteam\nqtr\ntime\nydstogo\nyardline_100\nposteam_score\ndefteam_score\ngo_boost\ngo\nepa\nwp\nwp_fail\nwp_succeed\nwp_change\nfg_make_prob\nmiss_fg_wp\nmake_fg_wp\npunt_wp\n\n\n\n\n2016\nRex Ryan\nBUF\nBAL\n4\n14:19\n1\n49\n7\n10\n9.71\n0\n-1.879\n0.335\n0.221\n0.437\n0.216\n0.000\n0.206\n0.408\n0.269\n\n\n2016\nJohn Harbaugh\nBAL\nBUF\n4\n12:59\n18\n78\n10\n7\n-10.09\n0\n0.465\n0.630\n0.515\n0.781\n0.265\n0.000\n0.481\n0.793\n0.643\n\n\n2016\nRex Ryan\nBUF\nBAL\n4\n11:46\n4\n59\n7\n10\n2.80\n0\n-0.668\n0.267\n0.201\n0.406\n0.205\n0.000\n0.187\n0.418\n0.269\n\n\n2016\nJohn Harbaugh\nBAL\nBUF\n4\n07:43\n14\n27\n10\n7\n-6.31\n0\n2.973\n0.804\n0.681\n0.899\n0.218\n0.765\n0.656\n0.820\nNA\n\n\n2016\nJohn Harbaugh\nBAL\nBUF\n4\n05:42\n16\n19\n10\n7\n-7.08\n0\n0.469\n0.846\n0.733\n0.936\n0.203\n0.892\n0.706\n0.837\nNA\n\n\n2016\nRex Ryan\nBUF\nBAL\n4\n04:43\n18\n86\n7\n13\n-2.08\n0\n0.012\n0.101\n0.047\n0.204\n0.156\n0.000\n0.041\n0.196\n0.083\n\n\n\n\n\n\n\nApplying the same transformations to this smaller set as we did to the set of every 4th down play gives us performance by coach in these scenarios.\n\n\n\n\n\ncoach\nteam\nseason\nshould_go\nshouldnt_go\npct\nepa\ncount\n\n\n\n\nAdam Gase\nMIA\n2016\n0.000\n1\n0.625\n-0.278\n16\n\n\nAdam Gase\nMIA\n2017\n0.500\n1\n0.375\n-0.133\n14\n\n\nAdam Gase\nMIA\n2018\n0.000\n1\n0.438\n-0.021\n13\n\n\nAdam Gase\nNYJ\n2019\n0.286\n1\n0.438\n-0.171\n17\n\n\nAdam Gase\nNYJ\n2020\n0.400\n1\n0.125\n-0.382\n15\n\n\nAndy Reid\nKC\n2016\n0.250\n1\n0.750\n0.230\n19\n\n\n\n\n\n\n\nNow we can cross tabulate as before.\n\n\n\n\n\ncoach\nteam\nseason\nshould_go\nshouldnt_go\npct\nepa\ncount\nz_wins\nz_should\nz_shouldnt\nz_epa\nabove_mean_wins\nabove_mean_should\nabove_mean_shouldnt\nabove_mean_epa\n\n\n\n\nAdam Gase\nMIA\n2016\n0.000\n1.000\n0.625\n-0.278\n16\n0.652\n-1.801\n0.493\n-1.445\n1\n0\n1\n0\n\n\nAdam Gase\nMIA\n2017\n0.500\n1.000\n0.375\n-0.133\n14\n-0.655\n0.438\n0.493\n-0.612\n0\n1\n1\n0\n\n\nAdam Gase\nMIA\n2018\n0.000\n1.000\n0.438\n-0.021\n13\n-0.328\n-1.801\n0.493\n0.031\n0\n0\n1\n1\n\n\nAdam Gase\nNYJ\n2019\n0.286\n1.000\n0.438\n-0.171\n17\n-0.328\n-0.522\n0.493\n-0.834\n0\n0\n1\n0\n\n\nAdam Gase\nNYJ\n2020\n0.400\n1.000\n0.125\n-0.382\n15\n-1.961\n-0.010\n0.493\n-2.047\n0\n0\n1\n0\n\n\nAndy Reid\nKC\n2016\n0.250\n1.000\n0.750\n0.230\n19\n1.305\n-0.682\n0.493\n1.474\n1\n0\n1\n1\n\n\nAndy Reid\nKC\n2017\n0.333\n0.857\n0.625\n0.096\n22\n0.652\n-0.308\n-1.540\n0.700\n1\n0\n0\n1\n\n\nAndy Reid\nKC\n2018\n0.750\n1.000\n0.750\n0.353\n16\n1.305\n1.558\n0.493\n2.178\n1\n1\n1\n1\n\n\nAndy Reid\nKC\n2019\n0.400\n0.909\n0.750\n0.021\n16\n1.305\n-0.010\n-0.801\n0.271\n1\n0\n0\n1\n\n\nAndy Reid\nKC\n2020\n0.500\n1.000\n0.875\n0.097\n11\n1.958\n0.438\n0.493\n0.706\n1\n1\n1\n1\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nWe see similar results here, where 4th down correct decision rate does not have much of an effect on a team’s record throughout the entire season, but there seems to be even more of an effect on 4th down EPA. This is useful information going into feature selection. We will attempt to predict 4th down EPA during a season, using a variety of features."
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "Thomas Sigall is a graduate student at Georgetown University currently pursuing a Masters of Science in Data Science and Analytics. He graduated from Villanova University in 2023 with a B.A. in Philosophy and Minors in Computer Science and Statistics. Originally from Redmond, Washington, he enjoys studying a wide range of topics, as evidenced by his diverse academic background. Outside of academics, he enjoys running and loves to follow sports."
  },
  {
    "objectID": "decision_trees.html",
    "href": "decision_trees.html",
    "title": "Decision Trees",
    "section": "",
    "text": "Classification\n\n\nRegression"
  },
  {
    "objectID": "data_gathering.html",
    "href": "data_gathering.html",
    "title": "Data Gathering",
    "section": "",
    "text": "Data\nData to evaluate NFL decision making was gathered by using the nflreadr package. The creators of this package provide detailed instructions and examples on how to use and clean this data, which can be found at their website here.\nReddit data is accessed through their API, information on which can be found here. This is done using PRAW: the Python Reddit API Wrapper."
  },
  {
    "objectID": "high_leverage_scenarios.html",
    "href": "high_leverage_scenarios.html",
    "title": "High-Leverage Scenarios",
    "section": "",
    "text": "Isolate Scenarios\nNot all 4th down decisions are created equal. Depending on a variety of factors such as score, time of game, field position, and others different 4th down decisions can be a lot more important than others. It would be useful to attempt to isolate those high-leverage situations and explore those as they have the potential to tell us a lot more about decision making tendencies of NFL head coaches.\nFiltering all 4th down decisions by ones that have a difference of at least 20% in resultant win probability base simply on whether the coach decides to go for it or not gives us a good look at those high leverage situations. Filtering the data further by only including situations in which if the coach goes for it and succeeds, then they are almost guaranteed to win the game (wp_succeed &gt; 0.95)\n\n\n\n\n\nseason\ncoach\nposteam\ndefteam\nqtr\ntime\nydstogo\nyardline_100\nposteam_score\ndefteam_score\ngo_boost\ngo\nepa\nwp\nwp_fail\nwp_succeed\nwp_change\nfg_make_prob\nmiss_fg_wp\nmake_fg_wp\npunt_wp\n\n\n\n\n2016\nBen McAdoo\nNYG\nDAL\n4\n01:12\n1\n37\n20\n19\n13.050\n0\n-1.109\n0.825\n0.654\n1.000\n0.345\n0.628\n0.632\n0.848\n0.744\n\n\n2016\nMike McCoy\nLAC\nKC\n4\n01:59\n10\n75\n27\n20\n-6.651\n0\n-1.719\n0.952\n0.695\n0.981\n0.286\n0.000\n0.669\n0.968\n0.838\n\n\n2016\nJason Garrett\nDAL\nWAS\n4\n01:40\n9\n42\n27\n23\n1.078\n0\n-0.352\n0.923\n0.767\n1.000\n0.232\n0.357\n0.748\n0.926\n0.830\n\n\n2016\nJeff Fisher\nLA\nSEA\n4\n02:00\n5\n42\n9\n3\n0.519\n0\n-0.647\n0.951\n0.730\n0.980\n0.250\n0.357\n0.702\n0.948\n0.825\n\n\n2016\nGus Bradley\nJAX\nIND\n4\n01:27\n10\n51\n30\n27\n-3.757\n0\n-0.037\n0.926\n0.730\n1.000\n0.270\n0.000\n0.665\n0.902\n0.847\n\n\n2016\nGus Bradley\nJAX\nIND\n4\n00:38\n15\n56\n30\n27\n-8.343\n0\n-0.022\n0.933\n0.791\n1.000\n0.209\n0.000\n0.675\n0.956\n0.909\n\n\n2016\nJeff Fisher\nLA\nARI\n4\n01:14\n12\n57\n17\n13\n-8.304\n0\n-0.411\n0.927\n0.627\n1.000\n0.373\n0.000\n0.564\n0.919\n0.784\n\n\n2016\nChuck Pagano\nIND\nHOU\n4\n02:00\n21\n90\n23\n16\n-8.714\n0\n-0.302\n0.922\n0.772\n1.000\n0.228\n0.000\n0.737\n0.985\n0.876\n\n\n2016\nSean Payton\nNO\nSEA\n4\n02:00\n16\n18\n22\n20\n-4.153\n0\n0.044\n0.910\n0.731\n0.977\n0.246\n0.904\n0.694\n0.825\nNA\n\n\n2016\nSean Payton\nNO\nSEA\n4\n02:00\n21\n23\n22\n20\n-6.960\n0\n0.681\n0.901\n0.715\n0.980\n0.265\n0.840\n0.674\n0.825\nNA\n\n\n\n\n\n\n\nLet’s visualize this data and make it easier to look through using a familiar plot structure.\n\n\n\n\n\n\nI enjoy this plot because it really allows you to put yourself in the shoes of these coaches. All the necessary information is contained in each point when hovered over to make a decision. Try some yourself, hover over a point, get an understanding of the situation, and ask: if I was the coach would I have gone for it? All of these are 4th quarter situations with the game on the line. The final line in the popup is the “answer”, so to speak. If go_boost is positive, then the stats say you should go for it, and if it is negative then you should not. If the number following go_boost is 100, the coach actually did end up going for it, and if it is 0 then they did not go for it (either attempt a field goal or punt). Especially look at the scenarios in which the go_boost is high, meaning it would be a very good decision to go for it. Would you have taken the risk and attempted the conversion? Many coaches do not, despite the fact that it would be the “correct” play. Even after spending a lot of time with these situations, I have a hard time blaming them.\n\n\nA High Leverage Example\nTake this situation for example. You are Vic Fangio, coach of the 2019 Denver Broncos, a struggling team sitting at 2-5 heading into a week 8 match up against the 4-2 Indianapolis Colts. After battling your way through a low-scoring game, you find yourself with the ball with 3:30 left in the game, clinging to a one point lead. All you have to do is hold on and you will get a win against a solid Colts team that could help turn your season around. Just one solid drive down the field will run out the rest of the clock. This turns out to be too much to ask, however, as the drive stalls at the Colts 43-yardline. You have a critical decision to make.\nThe score is 13-12, your team is winning. There is 1:55 left in the game. It is 4th and 5 at your opponents 43 yardline (you are 43 yards away from scoring). This is too far for a field goal, as it would be 60 yards which is too far for your kicker to attempt. Your options are as follows:\n\nGo for it and attempt to get the first down. If you pick up the required 5 yards, the game is essentially over and you win. However if you attempt the conversion and do not pick up the first down, then your opponents get the ball back where they stopped you, meaning they do not have far to go (only about 30 yards) themselves to kick a field goal and win the game.\nPunt and give the ball back to the other team near their own end-zone with about 1 minute remaining. They would have to go further to get within field goal range, but you would be giving them the ball back rather than attempting to end the game by picking up the first down.\n\nBelow is a diagram of the situation. The blue line is where you currently have the ball and the yellow line is where you need to advance the ball should you decide to go for it. If you decide to go for it and cannot get to the yellow line, your opponent would get the ball wherever they stopped you, most likely around the blue line. The purple line is where your opponent would need to get to in order to kick a field goal to win the game. As shown on the diagram, a punt would mean they must advance the ball much further to reach that purple line.\n\nWhat would you do here? Make the risky play and attempt to end the game right here and now by getting a first down, but giving your opponent a much better chance to win if you do not get it? Or make the safe play and not even try to end the game, but give your opponent a much lower chance to win than if you failed to reach the yellow line? On that October day back in 2019, Vic Fangio decided to play it safe. He punted the ball so the Colts would get it at their own 11 yard line. They had to go about 60 yards to get into field goal range for Adam Vinateri, their kicker. This is a much further distance than the 20 yards the Colts would have to go if the Broncos failed their 4th down attempt. However this distance did not matter in the end, as the Colts were able to drive 60 yards down the field and kick the game winning field goal with 20 seconds left. Final score: Broncos 13, Colts 15. The Broncos lose and fall to 2-6 at the halfway point of the 2019 NFL season.\nIt would absolutely be unfair to place all of the blame for the loss on this one decision by Vic Fangio here, as there are so many parts to a football game. For example if the Broncos score more than 15 points (a very low number for a football game) then we aren’t even talking about this decision years after it happened. But the purpose of this exercise is to put yourself in the shoes of these coaches and make tough decisions. Even though I know all of the probabilities associated with each outcome in this situation, I still have a hard time making the call to go for it. It took me a long time to think about each option, and if I’m being honest here, that time was mostly spent trying to convince myself that option 1 was incorrect. I’ll bet many of you felt that way too, none of us wanted to take the risky play. It is a lot easier to stomach option 2 because there isn’t that option of catastrophic failure lurking in the background. The potential to instantly win the game is overshadowed by the threat of giving the ball to the other team in such a good position.\nTaking option 1 in this situation resulted in a 10.65% increase in win probability regardless of the outcome (success or failure in the attempt). This should be a clear-cut decision with that kind of increase in win probability. Why is it such a hard decision then? My initial thoughts say that this is the case becasue it is such a big risk to take, as attempting it and failing puts your opponent in a much better position. Just punt it away, take the safe play and make your opponent go win the game, rather than go for it and fail and have loss be on your shoulders. As I said earlier, it is a lot easier to stomach a loss that is the result of conservative decision making than one that is the result of risky decision making."
  },
  {
    "objectID": "code.html",
    "href": "code.html",
    "title": "Code",
    "section": "",
    "text": "Link to GitHub repository"
  },
  {
    "objectID": "fourth_decisions.html",
    "href": "fourth_decisions.html",
    "title": "4th Down Decisions",
    "section": "",
    "text": "We will initially explore the data in a similar manner to the method seen in David Romer’s paper (Romer 2006). In his evaluation of fourth down decisions, he followed a four step process. First, he estimated the value of kicking (not going for it). Second, he estimated the value of going for it. Third, he figured out which decision was better. Finally, he compared this to the actual decisions made by coaches.\nThanks again to the nflverse package, we already have completed steps one and two as we can simply use the go_boost variable to estimate the value of kicking or going for it on each fourth down. Step three was already completed in the cleaning process, as we already have a table that takes into account the fact that if go_boost is negative, then the offensive team should kick. If go_boost is positive, then they should go for it. We have all the information to evaluate theoretical decisions, now we must evaluate the actual decisions made by coaches.\n\n4th Down Statistics\nHow often do coaches make the correct decision on 4th down?\n\n\n\n\n\nWe can see a clear difference between these two plots when they are put on the same scale. When it would be a “correct” decision to kick rather than go for it (when win probability would go down if a conversion was attempted) coaches often make the correct decision. Every coach was correct in these situations at least 90% which makes sense because these decisions are often easy to make. They are not the borderline decisions that we can learn a lot about coaches from. For those we turn to the first graph, where we can clearly see that the decision on whether or not to go for it when doing so would increase your win probability is much more difficult, as only two coaches got this one right over 50% of the time. Let’s look at this decision more closely and see what turns coaches away from going for it even when they should be.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nThe first graph is colored based on the proportion of plays in which a coach decides to go for it when doing so would have a positive impact on their win probability. The second graph is colored based on the proportion of plays in which going for it would have a positive impact on their win probability, regardless of whether or not a coach actually decided to go for it.\nThese graphs clearly show that coaches in the NFL are far too conservative. The only situation in which they consistently go for it is on 4th and 1 inside the 50. The data suggest that they should actually always go for it when there are less than 2 yards to go and almost always go for it within 5 yards. Coaches are consistently far too conservative in situations when it is clearly advantageous to attempt a 4th down conversion. Why might this be the case? Let’s perform some EDA to come up with some possible explanations.\n\n\n\n\n\nReferences\n\nRomer, David. 2006. “Do Firms Maximize? Evidence from Professional Football.” Journal of Political Economy 114 (2): 340–65. https://doi.org/10.1086/501171."
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Introduction",
    "section": "",
    "text": "Thomas Sigall - tns29\n\n\nDecision Making in Sports\nIn sports, as in all areas of life, there are a variety of decisions that actors can make as their game or competition unfolds. As a result, there are numerous decisions that can be made, each coming with their own level of risk. Some decisions are obvious, like tagging up from third base on a deep fly ball with less than two outs or punting on fourth and long when back at your own end zone. However, many more appear to not be so obvious, as evidenced by the variety of opinions that arise when observing these choices in action. Despite numerous advancements in analysis in many sports, decisions are still heavily debated on a daily basis. Even if analysis on other similar situations suggests one decision should be made, we often see the exact opposite on the field. Ward Edwards, in his 1954 paper “The theory of decision making” introduces this well, saying “The traditional mathematical notion for dealing with games of chance (and so with risky decisions) is the notion that choices should be made so as to maximize expected value… The assumption that people actually behave the way this mathematical notion says they should is contradicted by observable behavior in many risky situations” (Edwards 1954, 391).\nWhy do people behave this way? It goes against what we know about expected value and suggests that we are illogical actors. This is elaborated further by Daniel Kahneman and Amos Tversky in their influential 1979 paper “Prospect Theory: an Analysis of Decision Under Risk” in which they explain, “Choices among risky prospects exhibit several pervasive effects that are inconsistent with the basic tenets of utility theory” (Kahneman and Tversky 1979). This eventually leads them to an alternative theory of choice “in which value is assigned to gains and losses rather than to final assets and in which probabilities are replaced by decision weights” (Kahneman and Tversky 1979).\nTo better understand decision making, we will do as David Romer did in his 2006 paper “Do Firms Maximize? Evidence from Professional Football” (Romer 2006). We will look at one of the most decisions certainly in football but perhaps in all of sports: 4th down. Focusing on this decision and attempting to understand the reasoning behind why it is so frequently done incorrectly will hopefully allow us to learn more about the decision making process not only in football, but in many other areas of life.\n\n\nQuestions\n\nHow are decisions in sports currently evaluated?\nCould we improve this evaluation process?\nWould improvements in this process lead to better decision making on the field?\nHow can we determine why certain decisions are made?\nHow can we apply alternative theories of choice to specific games?\nHow different would the sports landscape look if everything were optimized?\nAre there certain factors that theories of choice could not take into account?\nIf there truly is an optimal choice every time, would it be possible for anyone to coach a team?\nCan these principles be exteneded to off-field deicisons, such as team-building and player evaluation?\nAre unoptimized decisions part of what makes sports enjoyable?\n\n\n\n\n\n\n\n\n\nReferences\n\nEdwards, Ward. 1954. “The Theory of Decision Making.” Psychological Bulletin 51 (4): 380–417. https://doi.org/10.1037/h0053870.\n\n\nKahneman, Daniel, and Amos Tversky. 1979. “Prospect Theory: An Analysis of Decision Under Risk.” Econometrica 47 (2): 263. https://doi.org/10.2307/1914185.\n\n\nRomer, David. 2006. “Do Firms Maximize? Evidence from Professional Football.” Journal of Political Economy 114 (2): 340–65. https://doi.org/10.1086/501171."
  },
  {
    "objectID": "data_cleaning1.html",
    "href": "data_cleaning1.html",
    "title": "4th Down Data",
    "section": "",
    "text": "By Coach\nWe start with the raw 4th down data from the nflverse package. The first six rows and eight columns can be seen here.\n\n\n# A tibble: 6 × 383\n  play_id game_id      old_game_id home_team away_team season_type  week posteam\n    &lt;dbl&gt; &lt;chr&gt;        &lt;chr&gt;       &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;       &lt;int&gt; &lt;chr&gt;  \n1       1 2016_01_BUF… 2016091101  BAL       BUF       REG             1 &lt;NA&gt;   \n2      36 2016_01_BUF… 2016091101  BAL       BUF       REG             1 BAL    \n3      58 2016_01_BUF… 2016091101  BAL       BUF       REG             1 BAL    \n4      85 2016_01_BUF… 2016091101  BAL       BUF       REG             1 BAL    \n5     109 2016_01_BUF… 2016091101  BAL       BUF       REG             1 BAL    \n6     130 2016_01_BUF… 2016091101  BAL       BUF       REG             1 BAL    \n# ℹ 375 more variables: posteam_type &lt;chr&gt;, defteam &lt;chr&gt;, side_of_field &lt;chr&gt;,\n#   yardline_100 &lt;dbl&gt;, game_date &lt;chr&gt;, quarter_seconds_remaining &lt;dbl&gt;,\n#   half_seconds_remaining &lt;dbl&gt;, game_seconds_remaining &lt;dbl&gt;,\n#   game_half &lt;chr&gt;, quarter_end &lt;dbl&gt;, drive &lt;dbl&gt;, sp &lt;dbl&gt;, qtr &lt;dbl&gt;,\n#   down &lt;dbl&gt;, goal_to_go &lt;dbl&gt;, time &lt;chr&gt;, yrdln &lt;chr&gt;, ydstogo &lt;dbl&gt;,\n#   ydsnet &lt;dbl&gt;, desc &lt;chr&gt;, play_type &lt;chr&gt;, yards_gained &lt;dbl&gt;,\n#   shotgun &lt;dbl&gt;, no_huddle &lt;dbl&gt;, qb_dropback &lt;dbl&gt;, qb_kneel &lt;dbl&gt;, …\n\n\nThere are a large number of columns in this data, taken from the 2022 NFL season, we do not need all 383. The purpose of this data is to help determine how coaches today approach 4th down, a basic yet essential decision in the NFL. To do this we only need to look at these columns:\n\n\n\n\n\nseason\nhome_coach\naway_coach\nposteam\ndefteam\nposteam_type\nqtr\ntime\nydstogo\nyardline_100\nposteam_score\ndefteam_score\ngo_boost\ngo\nepa\nwp_fail\nwp_succeed\nwp\nfg_make_prob\nmiss_fg_wp\nmake_fg_wp\npunt_wp\n\n\n\n\n2016\nJohn Harbaugh\nRex Ryan\nBAL\nBUF\nhome\n1\n12:05\n1\n66\n0\n0\n1.8427797\n0\n-0.9226208\n0.4501592\n0.5882827\n0.5102725\n0.0000000\n0.4320890\n0.5741632\n0.5265389\n\n\n2016\nJohn Harbaugh\nRex Ryan\nBAL\nBUF\nhome\n1\n11:52\n6\n71\n0\n0\n-1.1323169\n0\n-0.4050476\n0.4403515\n0.5971214\n0.4710029\n0.0000000\n0.4196399\n0.5725211\n0.5166918\n\n\n2016\nJohn Harbaugh\nRex Ryan\nBUF\nBAL\naway\n1\n09:42\n18\n76\n0\n0\n-5.7820437\n0\n0.2241808\n0.3423280\n0.5154754\n0.4189611\n0.0000000\n0.3280475\n0.5250292\n0.4171238\n\n\n2016\nJohn Harbaugh\nRex Ryan\nBUF\nBAL\naway\n1\n05:30\n6\n43\n0\n0\n2.0073829\n0\n-0.4404633\n0.3919702\n0.5667855\n0.4749633\n0.0000000\n0.3907058\n0.5210628\n0.4426614\n\n\n2016\nJohn Harbaugh\nRex Ryan\nBUF\nBAL\naway\n1\n05:30\n11\n48\n0\n0\n-0.6287521\n0\n0.4479581\n0.3906138\n0.5670854\n0.4759269\n0.0000000\n0.3771124\n0.5210628\n0.4410649\n\n\n2016\nJohn Harbaugh\nRex Ryan\nBAL\nBUF\nhome\n1\n00:41\n15\n32\n0\n0\n-4.0096273\n0\n1.7974257\n0.5135549\n0.6866364\n0.5298005\n0.6625606\n0.4986032\n0.6224666\n0.5387274\n\n\n\n\n\n\n\nEach unit in this table is one 4th down decision. The variables include:\n\n\n\n\n\nVariable\nDescription\n\n\n\n\nseason\nSeason\n\n\nhome_coach\nHome Team Coach\n\n\naway_coach\nAway Team Coach\n\n\nposteam\nOffense Team\n\n\ndefteam\nDefense Team\n\n\nposteam_type\nOffense Home or Away\n\n\nqtr\nQuarter\n\n\ntime\nTime left in Quarter\n\n\nydstogo\nYards to Go\n\n\nyardline_100\nYardline Relative to End Zone\n\n\nposteam_score\nOffense Score\n\n\ndefteam_score\nDefense Score\n\n\ngo_boost\nChange in Win Probability if Conversion Attempted\n\n\ngo\nConversion Attempted (T/F)\n\n\nepa\nEstimated Points Added as a Result of the Play\n\n\nwp_fail\nWin Probability if Conversion Fails\n\n\nwp_succeed\nWin Probability if Conversion Succeeds\n\n\nwp\nWin Probability at Time of Play\n\n\nfg_make_prob\nChance of Making Field Goal\n\n\nmiss_fg_wp\nWin Probability if Field Goal Misses\n\n\nmake_fg_wp\nWin Probability if Field Goal is Made\n\n\npunt_wp\nWin Probability if Team Punts\n\n\n\n\n\n\n\nMaking a table showing when coaches make the correct decisions on 4th down is essential in evaluating their decision making process. This is made easy by the inclusion of the go_boost variable, which tells us the change in win probability if the team decides to go for it.\n\n\n`summarise()` has grouped output by 'coach', 'posteam'. You can override using\nthe `.groups` argument.\n\n\n# A tibble: 6 × 7\n  coach     posteam season should_go shouldnt_go     EPA count\n  &lt;chr&gt;     &lt;chr&gt;    &lt;int&gt;     &lt;dbl&gt;       &lt;dbl&gt;   &lt;dbl&gt; &lt;int&gt;\n1 Adam Gase MIA       2016     0.075       0.975 -0.278    119\n2 Adam Gase MIA       2017     0.375       0.890 -0.133    131\n3 Adam Gase MIA       2018     0.211       1     -0.0208   123\n4 Adam Gase NYJ       2019     0.34        0.976 -0.171    133\n5 Adam Gase NYJ       2020     0.237       0.942 -0.382    128\n6 Andy Reid KC        2016     0.269       1      0.230    134\n\n\nThis data shows when coaches make the correct choice on 4th down, their average estimated points added on 4th downs throughout the season, and the number of 4th down decisions they had to make throughout the season. It shows the percent of times each coach makes the correct decision in two scenarios: when going for it would have a positive effect on their win probability and when going for it would have a negative effect on their win probability.\n\n\nBy Situation\nOne of, if not the most important factor in making a decision on fourth down is the position your team is on the field. Looking at this more closely requires a table that shows coaches decisions based on where they are on the field and how many downs they need to gain to get a first down.\n\n\n`summarise()` has grouped output by 'yardline_100'. You can override using the\n`.groups` argument.\n\n\n# A tibble: 6 × 7\n# Groups:   yardline_100 [3]\n  yardline_100 ydstogo actual_go expected_go count go_boost increase_odds\n         &lt;dbl&gt;   &lt;dbl&gt;     &lt;dbl&gt;       &lt;dbl&gt; &lt;int&gt;    &lt;dbl&gt;         &lt;dbl&gt;\n1            1       1     0.820       0.956   295    4.96              1\n2            2       1     0.708       0.875    24    4.89              1\n3            2       2     0.409       0.852   176    2.38              1\n4            3       1     0.767       0.933    30    5.84              1\n5            3       2     0.45        0.75     20    1.62              1\n6            3       3     0.230       0.655   165    0.807             1\n\n\nThis table shows us the percentage of times a coach chose to go for it in the given situation. The first row, for example, shows that 80% of the time a coach decided to go for it when they were at 4th and 1 at the 1 yard line - they were 1 yard away from scoring. It also shows is the average increase in win probability if a coach were to go for it. For example, at 4th and 1 at the 1 yard line, going for it increases your win probability by an average of 5%, an incredibly large number."
  },
  {
    "objectID": "data.html",
    "href": "data.html",
    "title": "Data",
    "section": "",
    "text": "A significant source of data was obtained using the nflreadr package. More information can be found here: Ho and Carl (2023).\n\n\n\n\nReferences\n\nHo, Tan, and Sebastian Carl. 2023. Nflreadr: Download ’Nflverse’ Data."
  },
  {
    "objectID": "feature_record.html",
    "href": "feature_record.html",
    "title": "Record Data",
    "section": "",
    "text": "As we are looking at coach decision making, could we develop a model to effectively predict when coaches will and will not go for it on 4th down? In other words, what properties of the (coach, sitaution) pair will effectively predict whether or not a coach decides to go for it on 4th down? Doing this will give valuable insights into the decision-making process as understanding what situations each coach decides to go for it or not allows us to compare philosophies between coaches.\n\n\n\n\n\n\n\ncoach\ngame_half\nhalf_seconds_remaining\nydstogo\nyardline_100\nposteam_score\ndefteam_score\ngo_boost\nwp_fail\nwp_succeed\nwp\nfg_make_prob\nmiss_fg_wp\nmake_fg_wp\npunt_wp\nscore_diff\ngo\n\n\n\n\nJohn Harbaugh\n1\n1625\n1\n66\n0\n0\n1.8427797\n0.4501592\n0.5882827\n0.5102725\n0.0000000\n0.4320890\n0.5741632\n0.5265389\n0\n0\n\n\nJohn Harbaugh\n1\n1612\n6\n71\n0\n0\n-1.1323169\n0.4403515\n0.5971214\n0.4710029\n0.0000000\n0.4196399\n0.5725211\n0.5166918\n0\n0\n\n\nRex Ryan\n1\n1482\n18\n76\n0\n0\n-5.7820437\n0.3423280\n0.5154754\n0.4189611\n0.0000000\n0.3280475\n0.5250292\n0.4171238\n0\n0\n\n\nRex Ryan\n1\n1230\n6\n43\n0\n0\n2.0073829\n0.3919702\n0.5667855\n0.4749633\n0.0000000\n0.3907058\n0.5210628\n0.4426614\n0\n0\n\n\nRex Ryan\n1\n1230\n11\n48\n0\n0\n-0.6287521\n0.3906138\n0.5670854\n0.4759269\n0.0000000\n0.3771124\n0.5210628\n0.4410649\n0\n0\n\n\nJohn Harbaugh\n1\n941\n15\n32\n0\n0\n-4.0096273\n0.5135549\n0.6866364\n0.5298005\n0.6625606\n0.4986032\n0.6224666\n0.5387274\n0\n0\n\n\n\n\n\n\n\nFeatures for this model include: game_half, half_seconds_remaining, ydstogo, yardline_100, posteam_score, defteam_score, go_boost, wp_fail, wp_succeed, wp, fg_make_prob, miss_fg_wp, make_fg_wp, punt_wp.\nWe want to look at the decision making process of each individual coach. To start, lets look at the process of the coach that has stayed on the same team and had the most 4th down situations over the past 8 NFL seasons: Bill Belichick.\n\n\n\n\n\ncoach\ncount\n\n\n\n\nRon Rivera\n897\n\n\nBill Belichick\n892\n\n\nJohn Harbaugh\n881\n\n\nMike Tomlin\n879\n\n\nPete Carroll\n878\n\n\nAndy Reid\n791"
  },
  {
    "objectID": "feature_record.html#random-guessing",
    "href": "feature_record.html#random-guessing",
    "title": "Record Data",
    "section": "Random Guessing",
    "text": "Random Guessing\n\n\n           Metric  Random Guessing\n0        F1 Score            0.202\n1  Accuracy Score            0.503"
  },
  {
    "objectID": "feature_record.html#prepare-data",
    "href": "feature_record.html#prepare-data",
    "title": "Record Data",
    "section": "",
    "text": "coach\ngame_half\nhalf_seconds_remaining\nydstogo\nyardline_100\nposteam_score\ndefteam_score\ngo_boost\nwp_fail\nwp_succeed\nwp\nfg_make_prob\nmiss_fg_wp\nmake_fg_wp\npunt_wp\nscore_diff\ngo\n\n\n\n\nJohn Harbaugh\n1\n1625\n1\n66\n0\n0\n1.8427797\n0.4501592\n0.5882827\n0.5102725\n0.0000000\n0.4320890\n0.5741632\n0.5265389\n0\n0\n\n\nJohn Harbaugh\n1\n1612\n6\n71\n0\n0\n-1.1323169\n0.4403515\n0.5971214\n0.4710029\n0.0000000\n0.4196399\n0.5725211\n0.5166918\n0\n0\n\n\nRex Ryan\n1\n1482\n18\n76\n0\n0\n-5.7820437\n0.3423280\n0.5154754\n0.4189611\n0.0000000\n0.3280475\n0.5250292\n0.4171238\n0\n0\n\n\nRex Ryan\n1\n1230\n6\n43\n0\n0\n2.0073829\n0.3919702\n0.5667855\n0.4749633\n0.0000000\n0.3907058\n0.5210628\n0.4426614\n0\n0\n\n\nRex Ryan\n1\n1230\n11\n48\n0\n0\n-0.6287521\n0.3906138\n0.5670854\n0.4759269\n0.0000000\n0.3771124\n0.5210628\n0.4410649\n0\n0\n\n\nJohn Harbaugh\n1\n941\n15\n32\n0\n0\n-4.0096273\n0.5135549\n0.6866364\n0.5298005\n0.6625606\n0.4986032\n0.6224666\n0.5387274\n0\n0\n\n\n\n\n\n\n\nFeatures for this model include: game_half, half_seconds_remaining, ydstogo, yardline_100, posteam_score, defteam_score, go_boost, wp_fail, wp_succeed, wp, fg_make_prob, miss_fg_wp, make_fg_wp, punt_wp.\nWe want to look at the decision making process of each individual coach. To start, lets look at the process of the coach that has stayed on the same team and had the most 4th down situations over the past 8 NFL seasons: Bill Belichick.\n\n\n\n\n\ncoach\ncount\n\n\n\n\nRon Rivera\n897\n\n\nBill Belichick\n892\n\n\nJohn Harbaugh\n881\n\n\nMike Tomlin\n879\n\n\nPete Carroll\n878\n\n\nAndy Reid\n791"
  },
  {
    "objectID": "feature_record.html#iteration",
    "href": "feature_record.html#iteration",
    "title": "Record Data",
    "section": "Iteration",
    "text": "Iteration\n\nimport itertools\n\ndef maximize_CFS(x,y):\n     k = x.shape[1]\n     max_merit = 0\n     list1 = [*range(0, k)]; #print(list1)\n     for L in range(2, len(list1) + 1):\n          for subset in itertools.combinations(list1, L):\n               m = merit(x[: ,subset], y)\n               if(m &gt; max_merit):\n                    max_merit = m\n                    optimal_subset = subset\n                    print(\"found new max: \", max_merit, \"optimal features = \", list(subset))\n     return(x[:, optimal_subset])\n   \nx_opt=maximize_CFS(x,y)\n\nfound new max:  0.05203211893594671 optimal features =  [0, 1]\nfound new max:  0.11368768322796934 optimal features =  [0, 2]\nfound new max:  0.8816748733067931 optimal features =  [0, 4]\nfound new max:  1.123689303209766 optimal features =  [2, 6]\nfound new max:  2.5249624976212144 optimal features =  [3, 10]\n\nexplore_data(x_opt, y, iplot = False)\n\n(892, 2)\n(892, 1)\nmerit = 18.98937542410711\nmerit = 2.5249624976212144\n\nfeatures_opt = pd.DataFrame(x_opt, columns = feature_matrix.columns[[3,11]])"
  }
]